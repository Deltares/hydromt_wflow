
<!DOCTYPE html>


<html lang="en" data-content_root="../" data-theme="light">

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Design Principles and Guidelines &#8212; HydroMT Wflow  documentation</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "light";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "light";
  </script>
  <!--
    this give us a css class that will be invisible only if js is disabled
  -->
  <noscript>
    <style>
      .pst-js-only { display: none !important; }

    </style>
  </noscript>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../_static/styles/theme.css?digest=8878045cc6db502f8baf" rel="stylesheet" />
<link href="../_static/styles/pydata-sphinx-theme.css?digest=8878045cc6db502f8baf" rel="stylesheet" />

    <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=03e43079" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-design.min.css?v=95c83b7e" />
    <link rel="stylesheet" type="text/css" href="../_static/theme-deltares.css?v=066b352c" />
  
  <!-- So that users can add custom icons -->
  <script src="../_static/scripts/fontawesome.js?digest=8878045cc6db502f8baf"></script>
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../_static/scripts/bootstrap.js?digest=8878045cc6db502f8baf" />
<link rel="preload" as="script" href="../_static/scripts/pydata-sphinx-theme.js?digest=8878045cc6db502f8baf" />

    <script src="../_static/documentation_options.js?v=5929fcd5"></script>
    <script src="../_static/doctools.js?v=9bcbadda"></script>
    <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../_static/design-tabs.js?v=f930bc37"></script>
    <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'dev_guide/software_design';</script>
    <script>
        DOCUMENTATION_OPTIONS.theme_version = '0.16.1';
        DOCUMENTATION_OPTIONS.theme_switcher_json_url = 'https://raw.githubusercontent.com/Deltares/hydromt_wflow/gh-pages/switcher.json';
        DOCUMENTATION_OPTIONS.theme_switcher_version_match = '1.0.0';
        DOCUMENTATION_OPTIONS.show_version_warning_banner =
            false;
        </script>
    <link rel="icon" href="../_static/hydromt-icon.svg"/>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="prev" title="Contributors" href="contributors.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  <meta name="docsearch:version" content="1.0.0.dev0" />
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="light">

  
  
  <div id="pst-skip-link" class="skip-link d-print-none"><a href="#main-content">Skip to main content</a></div>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>Back to top</button>

  
  <dialog id="pst-search-dialog">
    
<form class="bd-search d-flex align-items-center"
      action="../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         placeholder="Search the docs ..."
         aria-label="Search the docs ..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form>
  </dialog>

  <div class="pst-async-banner-revealer d-none">
  <aside id="bd-header-version-warning" class="d-none d-print-none" aria-label="Version warning"></aside>
</div>

  
    <header class="bd-header navbar navbar-expand-lg bd-navbar d-print-none">
<div class="bd-header__inner bd-page-width">
  <button class="pst-navbar-icon sidebar-toggle primary-toggle" aria-label="Site navigation">
    <span class="fa-solid fa-bars"></span>
  </button>
  
  
  <div class="col-lg-3 navbar-header-items__start">
    
      <div class="navbar-item">

  
    
  

<a class="navbar-brand logo" href="../index.html">
  
  
  
  
  
    
    
    
    <img src="../_static/hydromt-icon.svg" class="logo__image only-light" alt=""/>
    <img src="../_static/hydromt-icon.svg" class="logo__image only-dark pst-js-only" alt=""/>
  
  
    <p class="title logo__title">HydroMT Wflow</p>
  
</a></div>
    
  </div>
  
  <div class="col-lg-9 navbar-header-items">
    
    <div class="me-auto navbar-header-items__center">
      
        <div class="navbar-item">
<nav>
  <ul class="bd-navbar-elements navbar-nav">
    
<li class="nav-item ">
  <a class="nav-link nav-internal" href="../getting_started/intro.html">
    Getting started
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../user_guide/index.html">
    User guide
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../api/index.html">
    API
  </a>
</li>


<li class="nav-item current active">
  <a class="nav-link nav-internal" href="intro.html">
    Developments
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-external" href="https://deltares.github.io/hydromt/latest/index.html">
    HydroMT core
  </a>
</li>

  </ul>
</nav></div>
      
    </div>
    
    
    <div class="navbar-header-items__end">
      
        <div class="navbar-item navbar-persistent--container">
          

<button class="btn search-button-field search-button__button pst-js-only" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
 <i class="fa-solid fa-magnifying-glass"></i>
 <span class="search-button__default-text">Search</span>
 <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
</button>
        </div>
      
      
        <div class="navbar-item"><ul class="navbar-icon-links"
    aria-label="Icon Links">
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://github.com/Deltares/hydromt_wflow" title="GitHub" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><i class="fab fa-github fa-lg" aria-hidden="true"></i>
            <span class="sr-only">GitHub</span></a>
        </li>
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://deltares.github.io/Wflow.jl/dev/" title="Wflow" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><img src="../_static/wflow_logo.png" class="icon-link-image" alt="Wflow"/></a>
        </li>
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://www.deltares.nl/en/" title="Deltares" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><img src="../_static/deltares-blue.svg" class="icon-link-image" alt="Deltares"/></a>
        </li>
</ul></div>
      
    </div>
    
  </div>
  
  
    <div class="navbar-persistent--mobile">

<button class="btn search-button-field search-button__button pst-js-only" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
 <i class="fa-solid fa-magnifying-glass"></i>
 <span class="search-button__default-text">Search</span>
 <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
</button>
    </div>
  

  
    <button class="pst-navbar-icon sidebar-toggle secondary-toggle" aria-label="On this page">
      <span class="fa-solid fa-outdent"></span>
    </button>
  
</div>

    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
      <dialog id="pst-primary-sidebar-modal"></dialog>
      <div id="pst-primary-sidebar" class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
      <div class="sidebar-header-items__center">
        
          
          
            <div class="navbar-item">
<nav>
  <ul class="bd-navbar-elements navbar-nav">
    
<li class="nav-item ">
  <a class="nav-link nav-internal" href="../getting_started/intro.html">
    Getting started
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../user_guide/index.html">
    User guide
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../api/index.html">
    API
  </a>
</li>


<li class="nav-item current active">
  <a class="nav-link nav-internal" href="intro.html">
    Developments
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-external" href="https://deltares.github.io/hydromt/latest/index.html">
    HydroMT core
  </a>
</li>

  </ul>
</nav></div>
          
        
      </div>
    
    
    
      <div class="sidebar-header-items__end">
        
          <div class="navbar-item"><ul class="navbar-icon-links"
    aria-label="Icon Links">
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://github.com/Deltares/hydromt_wflow" title="GitHub" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><i class="fab fa-github fa-lg" aria-hidden="true"></i>
            <span class="sr-only">GitHub</span></a>
        </li>
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://deltares.github.io/Wflow.jl/dev/" title="Wflow" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><img src="../_static/wflow_logo.png" class="icon-link-image" alt="Wflow"/></a>
        </li>
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://www.deltares.nl/en/" title="Deltares" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><img src="../_static/deltares-blue.svg" class="icon-link-image" alt="Deltares"/></a>
        </li>
</ul></div>
        
      </div>
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">
<nav class="bd-docs-nav bd-links"
     aria-label="Section Navigation">
  <p class="bd-links__title" role="heading" aria-level="1">Section Navigation</p>
  <div class="bd-toc-item navbar-nav"><p aria-level="2" class="caption" role="heading"><span class="caption-text">Table of Contents</span></p>
<ul class="current nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../changelog.html">What’s new</a></li>
<li class="toctree-l1"><a class="reference internal" href="roadmap.html">Roadmap</a></li>
<li class="toctree-l1"><a class="reference external" href="https://deltares.github.io/hydromt/latest/dev/contributing">Developer's guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="dev_install.html">Developer’s environment</a></li>
<li class="toctree-l1"><a class="reference internal" href="release_workflow.html">Release workflow</a></li>
<li class="toctree-l1"><a class="reference internal" href="contributors.html">Contributors</a></li>
<li class="toctree-l1 current active"><a class="current reference internal" href="#">Design Principles and Guidelines</a></li>
</ul>
</div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
      <div class="sidebar-primary-item">
<div id="ethical-ad-placement"
      class="flat"
      data-ea-publisher="readthedocs"
      data-ea-type="readthedocs-sidebar"
      data-ea-manual="true">
</div></div>
  </div>


      </div>
      
      <main id="main-content" class="bd-main" role="main">
        
        
          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article d-print-none">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item">

<nav aria-label="Breadcrumb" class="d-print-none">
  <ul class="bd-breadcrumbs">
    
    <li class="breadcrumb-item breadcrumb-home">
      <a href="../index.html" class="nav-link" aria-label="Home">
        <i class="fa-solid fa-home"></i>
      </a>
    </li>
    
    <li class="breadcrumb-item"><a href="intro.html" class="nav-link">Developments</a></li>
    
    <li class="breadcrumb-item active" aria-current="page"><span class="ellipsis">Design Principles and Guidelines</span></li>
  </ul>
</nav>
</div>
      
    </div>
  
  
</div>
</div>
              
              
              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <section id="design-principles-and-guidelines">
<h1>Design Principles and Guidelines<a class="headerlink" href="#design-principles-and-guidelines" title="Link to this heading">#</a></h1>
<p>In this file, we provide the design principles and guidelines for the <code class="docutils literal notranslate"><span class="pre">hydromt_wflow</span></code> package.
The package is designed to be <strong>modular</strong>, <strong>extensible</strong>, and <strong>maintainable</strong>, following best practices in software design.</p>
<section id="overview">
<span id="software-design"></span><h2>Overview<a class="headerlink" href="#overview" title="Link to this heading">#</a></h2>
<p>HydroMT-Wflow is used as a Python library or as a command-line tool using YAML (.yml) configuration files.</p>
<p>To keep usage relatively simple, the package is designed around a single <code class="docutils literal notranslate"><span class="pre">WflowBaseModel</span></code> object, which should never be used directly by end-users.
Its subclasses, which are <code class="docutils literal notranslate"><span class="pre">WflowSbmModel</span></code> and <code class="docutils literal notranslate"><span class="pre">WflowSedimentModel</span></code>, are used to build, modify, and export Wflow models.</p>
<p>To allow for extensions and customizations for specific use cases, the <code class="docutils literal notranslate"><span class="pre">WflowBaseModel</span></code> class contains the generic components, methods and properties that are common across all Wflow models.
Any specific implementations and behaviors are meant to be defined in subclasses.
From now, we will refer to these models collectively as <code class="docutils literal notranslate"><span class="pre">Model</span></code> for simplicity, but it is important to note that the principles and guidelines apply to all these classes.</p>
<p>Users interact with the package primarily through YAML files, which are translated into function calls on the <code class="docutils literal notranslate"><span class="pre">Model</span></code> class.
This means that end users do not need to worry or know about the underlying components, workflows, or processes.
The only way that people should interact with / use Hydromt-Wflow, will be the public methods in <code class="docutils literal notranslate"><span class="pre">Model</span></code>.
Functions used in yml files correspond 1-to-1 to public model functions decorated with <code class="docutils literal notranslate"><span class="pre">hydromt_step`</span></code>.
Only the public methods of <code class="docutils literal notranslate"><span class="pre">Model</span></code> are allowed to be a <code class="docutils literal notranslate"><span class="pre">hydromt_step</span></code>.
Components and workflows cannot be used directly as <code class="docutils literal notranslate"><span class="pre">hydromt_step</span></code> callables.</p>
</section>
<section id="model-as-orchestrator">
<h2>Model as Orchestrator<a class="headerlink" href="#model-as-orchestrator" title="Link to this heading">#</a></h2>
<p>The <code class="docutils literal notranslate"><span class="pre">Model</span></code> class is designed to serve as an orchestrator or manager for the other parts of the codebase.</p>
<p>It combines components, workflows, and processes, but does <strong>not</strong> contain the actual implementation logic or complexity.</p>
<p>All the methods in <code class="docutils literal notranslate"><span class="pre">Model</span></code> are simple and delegate the real work to the respective components and workflows.</p>
<p>Currently, some <code class="docutils literal notranslate"><span class="pre">Model</span></code> methods do combine logic from multiple components.</p>
<p>For instance, the forcing component may need configuration settings from the config component, and then need to use the data from the grid component. However, to keep these components ignorant of each other, the WflowBaseModel class will be the connection.</p>
<p>This design choice is intentional: <strong>any interaction between multiple components has to go through public methods on the ``Model`` class.</strong>
Methods often require knowledge of multiple components and their interactions (e.g. write_forcing requires access to the config and grid).
To encourage reduced coupling, components are allowed to call public functions on the Model class.
This way <code class="docutils literal notranslate"><span class="pre">set_config</span></code>, <code class="docutils literal notranslate"><span class="pre">get_config</span></code>, <code class="docutils literal notranslate"><span class="pre">set_grid</span></code>, etc, can be used without needing to know about the internals of other components.</p>
</section>
<section id="typical-method-structure-in-model">
<h2>Typical Method Structure in Model<a class="headerlink" href="#typical-method-structure-in-model" title="Link to this heading">#</a></h2>
<p>Every method in the <code class="docutils literal notranslate"><span class="pre">Model</span></code> class should generally follow these steps:</p>
<ol class="arabic">
<li><p><strong>Data Retrieval</strong></p>
<blockquote>
<div><p>Retrieve any necessary data from the <code class="docutils literal notranslate"><span class="pre">DataCatalog</span></code> or other components.
For example, reading data from the catalog or retrieving internal component state.</p>
</div></blockquote>
</li>
<li><p><strong>Delegation</strong></p>
<blockquote>
<div><p>Based on the inputs and retrieved data, determine which components, methods, or workflows to call, then pass the validated inputs to the appropriate methods.</p>
<p>This may involve calling methods from <code class="docutils literal notranslate"><span class="pre">config</span></code>, <code class="docutils literal notranslate"><span class="pre">grid</span></code>, <code class="docutils literal notranslate"><span class="pre">forcing</span></code>, <code class="docutils literal notranslate"><span class="pre">geoms</span></code>, or any workflow logic.</p>
<p><strong>Important</strong>: Each component should only use its own methods or public methods from <code class="docutils literal notranslate"><span class="pre">Model</span></code>, components must <strong>not</strong> access or depend on other components directly.</p>
</div></blockquote>
</li>
<li><p><strong>Output Handling</strong></p>
<blockquote>
<div><p>(Post-)process and return/store the outputs from the invoked operations.
Outputs may be stored in components or returned to the user.</p>
</div></blockquote>
</li>
</ol>
<p>An example method structure using made up method names in <code class="docutils literal notranslate"><span class="pre">Model</span></code> might look like this:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">workflows</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">wflow_base</span><span class="w"> </span><span class="kn">import</span> <span class="n">WflowBaseModel</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">components</span><span class="w"> </span><span class="kn">import</span> <span class="n">ForcingComponent</span><span class="p">,</span> <span class="n">ConfigComponent</span><span class="p">,</span> <span class="n">DataCatalog</span><span class="p">,</span> <span class="n">GridComponent</span>

<span class="k">class</span><span class="w"> </span><span class="nc">WflowExampleModel</span><span class="p">(</span><span class="n">WflowBaseModel</span><span class="p">):</span>
  <span class="n">forcing</span><span class="p">:</span> <span class="n">ForcingComponent</span>
  <span class="n">config</span><span class="p">:</span> <span class="n">ConfigComponent</span>
  <span class="n">data_catalog</span><span class="p">:</span> <span class="n">DataCatalog</span>
  <span class="n">grid</span><span class="p">:</span> <span class="n">GridComponent</span>
  <span class="o">...</span>
  <span class="k">def</span><span class="w"> </span><span class="nf">example_setup_method</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">input_data</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">model_option1</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="n">true</span><span class="p">):</span>
    <span class="c1"># Step 1: Data retrieval</span>
    <span class="n">config_data</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;setting1&quot;</span><span class="p">)</span> <span class="c1"># eg get starttime and endtime</span>
    <span class="n">data</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data_catalog</span><span class="o">.</span><span class="n">get_data</span><span class="p">(</span><span class="n">input_data</span><span class="p">,</span> <span class="n">config_data</span><span class="p">)</span>

    <span class="c1"># Step 2: Delegation to components and workflows</span>
    <span class="n">partial_result</span> <span class="o">=</span> <span class="n">workflows</span><span class="o">.</span><span class="n">example_workflow1</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
    <span class="n">result</span> <span class="o">=</span> <span class="n">workflows</span><span class="o">.</span><span class="n">example_workflow2</span><span class="p">(</span><span class="n">partial_result</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">grid</span><span class="o">.</span><span class="n">data</span><span class="p">,</span> <span class="n">model_option1</span><span class="p">)</span>

    <span class="c1"># Step 3: Output handling</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">option1</span><span class="p">,</span> <span class="n">model_option1</span><span class="p">)</span>
    <span class="k">if</span> <span class="s2">&quot;var1&quot;</span> <span class="ow">in</span> <span class="n">result</span><span class="p">:</span>
      <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">dovar1</span><span class="p">,</span> <span class="n">true</span><span class="p">)</span>
    <span class="n">rename_dict</span> <span class="o">=</span> <span class="p">{</span><span class="n">k</span><span class="p">:</span> <span class="n">v</span> <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_MAPS</span> <span class="k">if</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">result</span><span class="p">}</span> <span class="c1"># from hydromt to wflow name</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">forcing</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="n">result</span><span class="o">.</span><span class="n">rename</span><span class="p">(</span><span class="n">rename_dict</span><span class="p">))</span>
</pre></div>
</div>
<p>The above structure ensures that each method is clear, focused, and follows a consistent pattern.
It also allows the components and workflows to focus on their specific tasks without worrying about the overall orchestration.</p>
</section>
<section id="component-design-principles">
<h2>Component Design Principles<a class="headerlink" href="#component-design-principles" title="Link to this heading">#</a></h2>
<p>Each component in the system should follow these principles:</p>
<ul>
<li><p><strong>Encapsulation and Independence</strong></p>
<p>Each component is self-contained and independent.
It must not call or depend on any other components or internal attributes of <code class="docutils literal notranslate"><span class="pre">Model</span></code>.
This ensures components are easily replaceable and extensible without impacting the system as a whole.
For example:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">grid</span></code> must not access <code class="docutils literal notranslate"><span class="pre">config</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">forcing</span></code> must not use <code class="docutils literal notranslate"><span class="pre">grid</span></code></p></li>
</ul>
<p>Instead, components should expose methods that can be called by <code class="docutils literal notranslate"><span class="pre">Model</span></code> that will take in and or return the necessary data, which can then be passed to other components or workflows as needed.</p>
</li>
<li><p><strong>Strict Typing and Interfaces</strong></p>
<p>Component methods should have narrow and well-defined type signatures.
This improves clarity, maintainability, and testability.
Broad or ambiguous argument types (e.g., <code class="docutils literal notranslate"><span class="pre">data_like</span></code> in the datacatalog, which might be a <code class="docutils literal notranslate"><span class="pre">str</span></code>, <code class="docutils literal notranslate"><span class="pre">Path</span></code>, <code class="docutils literal notranslate"><span class="pre">GeoDataFrame</span></code>, <code class="docutils literal notranslate"><span class="pre">xr.Dataset</span></code>, <code class="docutils literal notranslate"><span class="pre">np.ndarray</span></code>, or <code class="docutils literal notranslate"><span class="pre">None</span></code>) are <strong>not allowed</strong> in component methods.</p>
<p>Any such type resolution or transformation must be handled in the <code class="docutils literal notranslate"><span class="pre">Model</span></code> before calling component methods.
This also means that components might have multiple methods for different data types.</p>
</li>
<li><p><strong>Validation</strong>
Validate the state of the component &amp; model (read/write mode), but also the method inputs to ensure they are correct and complete.
This can include checking types, formats, values, and asserting read/write modes.</p></li>
</ul>
</section>
<section id="workflows">
<h2>Workflows<a class="headerlink" href="#workflows" title="Link to this heading">#</a></h2>
<p>Workflows are functions that combine primitive data and model operations into higher-level processes.
They are defined in the <code class="docutils literal notranslate"><span class="pre">workflows</span></code> module and can be called from <code class="docutils literal notranslate"><span class="pre">Model</span></code> methods.
Workflows should follow these principles:
- <strong>Single Responsibility</strong>: Each workflow should perform a specific task or process.
- <strong>Reusability</strong>: Workflows should be designed to be reusable across different components and methods.
- <strong>No Direct Component Access</strong>: Workflows should not directly access or modify component states. Instead, they should operate on data passed to them from <code class="docutils literal notranslate"><span class="pre">WflowBaseModel</span></code>.
- <strong>Validation</strong>: Workflows should validate their inputs and outputs to ensure correctness.
- <strong>Naming Conventions</strong>: workflows work with the hydromt-naming conventions, and should also handle the renaming between hydromt-names and wflow names.</p>
</section>
</section>


                </article>
              
              
              
              
              
                <footer class="prev-next-footer d-print-none">
                  
<div class="prev-next-area">
    <a class="left-prev"
       href="contributors.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title">Contributors</p>
      </div>
    </a>
</div>
                </footer>
              
            </div>
            
            
              
                <dialog id="pst-secondary-sidebar-modal"></dialog>
                <div id="pst-secondary-sidebar" class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
<div class="version-switcher__container dropdown pst-js-only">
  <button id="pst-version-switcher-button-2"
    type="button"
    class="version-switcher__button btn btn-sm dropdown-toggle"
    data-bs-toggle="dropdown"
    aria-haspopup="listbox"
    aria-controls="pst-version-switcher-list-2"
    aria-label="Version switcher list"
  >
    Choose version  <!-- this text may get changed later by javascript -->
    <span class="caret"></span>
  </button>
  <div id="pst-version-switcher-list-2"
    class="version-switcher__menu dropdown-menu list-group-flush py-0"
    role="listbox" aria-labelledby="pst-version-switcher-button-2">
    <!-- dropdown will be populated by javascript on page load -->
  </div>
</div></div>

  <div class="sidebar-secondary-item">
<div
    id="pst-page-navigation-heading-2"
    class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> On this page
  </div>
  <nav class="bd-toc-nav page-toc" aria-labelledby="pst-page-navigation-heading-2">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#overview">Overview</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#model-as-orchestrator">Model as Orchestrator</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#typical-method-structure-in-model">Typical Method Structure in Model</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#component-design-principles">Component Design Principles</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#workflows">Workflows</a></li>
</ul>
  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
          </footer>
        
      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script defer src="../_static/scripts/bootstrap.js?digest=8878045cc6db502f8baf"></script>
<script defer src="../_static/scripts/pydata-sphinx-theme.js?digest=8878045cc6db502f8baf"></script>

  <footer class="bd-footer">
<div class="bd-footer__inner bd-page-width">
  
    <div class="footer-items__start">
      
        <div class="footer-item">

  <p class="copyright">
    
      © Copyright Deltares.
      <br/>
    
  </p>
</div>
      
        <div class="footer-item">

  <p class="sphinx-version">
    Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 8.2.3.
    <br/>
  </p>
</div>
      
    </div>
  
  
  
    <div class="footer-items__end">
      
        <div class="footer-item">
<p class="theme-version">
  <!-- # L10n: Setting the PST URL as an argument as this does not need to be localized -->
  Built with the <a href="https://pydata-sphinx-theme.readthedocs.io/en/stable/index.html">PyData Sphinx Theme</a> 0.16.1.
</p></div>
      
    </div>
  
</div>

  </footer>
  </body>
</html>