
<!DOCTYPE html>


<html lang="en" data-content_root="../" data-theme="light">

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Update a Wflow model: gauging stations &#8212; HydroMT Wflow  documentation</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "light";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "light";
  </script>
  <!--
    this give us a css class that will be invisible only if js is disabled
  -->
  <noscript>
    <style>
      .pst-js-only { display: none !important; }

    </style>
  </noscript>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../_static/styles/theme.css?digest=8878045cc6db502f8baf" rel="stylesheet" />
<link href="../_static/styles/pydata-sphinx-theme.css?digest=8878045cc6db502f8baf" rel="stylesheet" />

    <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=03e43079" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-design.min.css?v=95c83b7e" />
    <link rel="stylesheet" type="text/css" href="../_static/nbsphinx-code-cells.css?v=2aa19091" />
    <link rel="stylesheet" type="text/css" href="../_static/theme-deltares.css?v=5ca2d357" />
  
  <!-- So that users can add custom icons -->
  <script src="../_static/scripts/fontawesome.js?digest=8878045cc6db502f8baf"></script>
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../_static/scripts/bootstrap.js?digest=8878045cc6db502f8baf" />
<link rel="preload" as="script" href="../_static/scripts/pydata-sphinx-theme.js?digest=8878045cc6db502f8baf" />

    <script src="../_static/documentation_options.js?v=5929fcd5"></script>
    <script src="../_static/doctools.js?v=9bcbadda"></script>
    <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../_static/design-tabs.js?v=f930bc37"></script>
    <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <script>window.MathJax = {"tex": {"inlineMath": [["$", "$"], ["\\(", "\\)"]], "processEscapes": true}, "options": {"ignoreHtmlClass": "tex2jax_ignore|mathjax_ignore|document", "processHtmlClass": "tex2jax_process|mathjax_process|math|output_area"}}</script>
    <script defer="defer" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = '_examples/update_model_gauges';</script>
    <script>
        DOCUMENTATION_OPTIONS.theme_version = '0.16.1';
        DOCUMENTATION_OPTIONS.theme_switcher_json_url = 'https://raw.githubusercontent.com/Deltares/hydromt_wflow/gh-pages/switcher.json';
        DOCUMENTATION_OPTIONS.theme_switcher_version_match = '1.0.0';
        DOCUMENTATION_OPTIONS.show_version_warning_banner =
            false;
        </script>
    <link rel="icon" href="../_static/hydromt-icon.svg"/>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Update a wflow model: water demand" href="update_model_water_demand.html" />
    <link rel="prev" title="Update a Wflow model: forcing" href="update_model_forcing.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  <meta name="docsearch:version" content="1.0.0.dev" />
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="light">

  
  
  <div id="pst-skip-link" class="skip-link d-print-none"><a href="#main-content">Skip to main content</a></div>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>Back to top</button>

  
  <dialog id="pst-search-dialog">
    
<form class="bd-search d-flex align-items-center"
      action="../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         placeholder="Search the docs ..."
         aria-label="Search the docs ..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form>
  </dialog>

  <div class="pst-async-banner-revealer d-none">
  <aside id="bd-header-version-warning" class="d-none d-print-none" aria-label="Version warning"></aside>
</div>

  
    <header class="bd-header navbar navbar-expand-lg bd-navbar d-print-none">
<div class="bd-header__inner bd-page-width">
  <button class="pst-navbar-icon sidebar-toggle primary-toggle" aria-label="Site navigation">
    <span class="fa-solid fa-bars"></span>
  </button>
  
  
  <div class=" navbar-header-items__start">
    
      <div class="navbar-item">

  
    
  

<a class="navbar-brand logo" href="../index.html">
  
  
  
  
  
    
    
    
    <img src="../_static/hydromt-icon.svg" class="logo__image only-light" alt=""/>
    <img src="../_static/hydromt-icon.svg" class="logo__image only-dark pst-js-only" alt=""/>
  
  
    <p class="title logo__title">HydroMT Wflow</p>
  
</a></div>
    
  </div>
  
  <div class=" navbar-header-items">
    
    <div class="me-auto navbar-header-items__center">
      
        <div class="navbar-item">
<div class="version-switcher__container dropdown pst-js-only">
  <button id="pst-version-switcher-button-2"
    type="button"
    class="version-switcher__button btn btn-sm dropdown-toggle"
    data-bs-toggle="dropdown"
    aria-haspopup="listbox"
    aria-controls="pst-version-switcher-list-2"
    aria-label="Version switcher list"
  >
    Choose version  <!-- this text may get changed later by javascript -->
    <span class="caret"></span>
  </button>
  <div id="pst-version-switcher-list-2"
    class="version-switcher__menu dropdown-menu list-group-flush py-0"
    role="listbox" aria-labelledby="pst-version-switcher-button-2">
    <!-- dropdown will be populated by javascript on page load -->
  </div>
</div></div>
      
        <div class="navbar-item">
<nav>
  <ul class="bd-navbar-elements navbar-nav">
    
<li class="nav-item current active">
  <a class="nav-link nav-internal" href="../getting_started/intro.html">
    Getting started
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../user_guide/intro.html">
    User guide
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../api.html">
    API reference
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../dev_guide/intro.html">
    Developments
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-external" href="https://deltares.github.io/hydromt/latest/index.html">
    HydroMT core
  </a>
</li>

  </ul>
</nav></div>
      
    </div>
    
    
    <div class="navbar-header-items__end">
      
        <div class="navbar-item navbar-persistent--container">
          

<button class="btn search-button-field search-button__button pst-js-only" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
 <i class="fa-solid fa-magnifying-glass"></i>
 <span class="search-button__default-text">Search</span>
 <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
</button>
        </div>
      
      
        <div class="navbar-item"><ul class="navbar-icon-links"
    aria-label="Icon Links">
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://github.com/Deltares/hydromt_wflow" title="GitHub" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><i class="fab fa-github fa-lg" aria-hidden="true"></i>
            <span class="sr-only">GitHub</span></a>
        </li>
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://deltares.github.io/Wflow.jl/dev/" title="Wflow" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><img src="../_static/wflow_logo.png" class="icon-link-image" alt="Wflow"/></a>
        </li>
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://www.deltares.nl/en/" title="Deltares" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><img src="../_static/deltares-blue.svg" class="icon-link-image" alt="Deltares"/></a>
        </li>
</ul></div>
      
    </div>
    
  </div>
  
  
    <div class="navbar-persistent--mobile">

<button class="btn search-button-field search-button__button pst-js-only" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
 <i class="fa-solid fa-magnifying-glass"></i>
 <span class="search-button__default-text">Search</span>
 <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
</button>
    </div>
  

  
    <button class="pst-navbar-icon sidebar-toggle secondary-toggle" aria-label="On this page">
      <span class="fa-solid fa-outdent"></span>
    </button>
  
</div>

    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
      <dialog id="pst-primary-sidebar-modal"></dialog>
      <div id="pst-primary-sidebar" class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
      <div class="sidebar-header-items__center">
        
          
          
            <div class="navbar-item">
<div class="version-switcher__container dropdown pst-js-only">
  <button id="pst-version-switcher-button-3"
    type="button"
    class="version-switcher__button btn btn-sm dropdown-toggle"
    data-bs-toggle="dropdown"
    aria-haspopup="listbox"
    aria-controls="pst-version-switcher-list-3"
    aria-label="Version switcher list"
  >
    Choose version  <!-- this text may get changed later by javascript -->
    <span class="caret"></span>
  </button>
  <div id="pst-version-switcher-list-3"
    class="version-switcher__menu dropdown-menu list-group-flush py-0"
    role="listbox" aria-labelledby="pst-version-switcher-button-3">
    <!-- dropdown will be populated by javascript on page load -->
  </div>
</div></div>
          
        
          
          
            <div class="navbar-item">
<nav>
  <ul class="bd-navbar-elements navbar-nav">
    
<li class="nav-item current active">
  <a class="nav-link nav-internal" href="../getting_started/intro.html">
    Getting started
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../user_guide/intro.html">
    User guide
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../api.html">
    API reference
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../dev_guide/intro.html">
    Developments
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-external" href="https://deltares.github.io/hydromt/latest/index.html">
    HydroMT core
  </a>
</li>

  </ul>
</nav></div>
          
        
      </div>
    
    
    
      <div class="sidebar-header-items__end">
        
          <div class="navbar-item"><ul class="navbar-icon-links"
    aria-label="Icon Links">
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://github.com/Deltares/hydromt_wflow" title="GitHub" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><i class="fab fa-github fa-lg" aria-hidden="true"></i>
            <span class="sr-only">GitHub</span></a>
        </li>
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://deltares.github.io/Wflow.jl/dev/" title="Wflow" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><img src="../_static/wflow_logo.png" class="icon-link-image" alt="Wflow"/></a>
        </li>
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://www.deltares.nl/en/" title="Deltares" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><img src="../_static/deltares-blue.svg" class="icon-link-image" alt="Deltares"/></a>
        </li>
</ul></div>
        
      </div>
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">
<nav class="bd-docs-nav bd-links"
     aria-label="Section Navigation">
  <p class="bd-links__title" role="heading" aria-level="1">Section Navigation</p>
  <div class="bd-toc-item navbar-nav"><p aria-level="2" class="caption" role="heading"><span class="caption-text">Table of Contents</span></p>
<ul class="current nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../getting_started/installation.html">Installation Guide</a></li>
<li class="toctree-l1 current active has-children"><a class="reference internal" href="../getting_started/example_index.html">Examples</a><details open="open"><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="build_model.html">Build a Wflow model from scratch</a></li>
<li class="toctree-l2"><a class="reference internal" href="build_sediment.html">Build a Wflow Sediment model</a></li>
<li class="toctree-l2"><a class="reference internal" href="update_model_landuse.html">Update a Wflow model: landuse</a></li>
<li class="toctree-l2"><a class="reference internal" href="update_model_forcing.html">Update a Wflow model: forcing</a></li>
<li class="toctree-l2 current active"><a class="current reference internal" href="#">Update a Wflow model: gauging stations</a></li>
<li class="toctree-l2"><a class="reference internal" href="update_model_water_demand.html">Update a wflow model: water demand</a></li>
<li class="toctree-l2"><a class="reference internal" href="connect_to_1d_model.html">Connect Wflow to a 1D model</a></li>
<li class="toctree-l2"><a class="reference internal" href="convert_staticmaps_to_mapstack.html">Convert Wflow staticmaps netcdf to raster files</a></li>
<li class="toctree-l2"><a class="reference internal" href="prepare_ldd.html">Prepare flow directions and related data from a DEM</a></li>

<li class="toctree-l2"><a class="reference internal" href="plot_wflow_staticmaps.html">Plot Wflow static maps</a></li>
<li class="toctree-l2"><a class="reference internal" href="plot_wflow_forcing.html">Plot Wflow forcing</a></li>
<li class="toctree-l2"><a class="reference internal" href="plot_wflow_results.html">Plot Wflow outputs</a></li>
<li class="toctree-l2"><a class="reference internal" href="upgrade_to_wflow_v1.html">Upgrade your model to Wflow.jl version 1</a></li>
<li class="toctree-l2"><a class="reference internal" href="clip_model.html">Clip a Wflow model</a></li>
</ul>
</details></li>
<li class="toctree-l1"><a class="reference external" href="https://deltares.github.io/hydromt/latest/getting_started/user_stories">User's stories</a></li>
<li class="toctree-l1"><a class="reference internal" href="../getting_started/faq.html">Frequently asked questions</a></li>
</ul>
</div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
      <div class="sidebar-primary-item">
<div id="ethical-ad-placement"
      class="flat"
      data-ea-publisher="readthedocs"
      data-ea-type="readthedocs-sidebar"
      data-ea-manual="true">
</div></div>
  </div>


      </div>
      
      <main id="main-content" class="bd-main" role="main">
        
        
          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article d-print-none">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item">

<nav aria-label="Breadcrumb" class="d-print-none">
  <ul class="bd-breadcrumbs">
    
    <li class="breadcrumb-item breadcrumb-home">
      <a href="../index.html" class="nav-link" aria-label="Home">
        <i class="fa-solid fa-home"></i>
      </a>
    </li>
    
    <li class="breadcrumb-item"><a href="../getting_started/intro.html" class="nav-link">Getting started</a></li>
    
    
    <li class="breadcrumb-item"><a href="../getting_started/example_index.html" class="nav-link">Examples</a></li>
    
    <li class="breadcrumb-item active" aria-current="page"><span class="ellipsis">Update a Wflow model: gauging stations</span></li>
  </ul>
</nav>
</div>
      
    </div>
  
  
</div>
</div>
              
              
              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <div class="admonition tip">
<p class="admonition-title">Tip</p>
<div>
    For an interactive online version click here:
    <a href="https://mybinder.org/v2/gh/Deltares/hydromt_wflow/main?urlpath=lab/tree/examples/update_model_gauges.ipynb" target="_blank" rel="noopener noreferrer"><img alt="Binder badge" src="https://mybinder.org/badge_logo.svg"></a>
</div></div>
<section id="Update-a-Wflow-model:-gauging-stations">
<h1>Update a Wflow model: gauging stations<a class="headerlink" href="#Update-a-Wflow-model:-gauging-stations" title="Link to this heading">#</a></h1>
<p>Once you have a <strong>Wflow</strong> model, you may want to update your model in order to use a new landuse map, change a parameter value, add sample locations, use different forcing data, create and run different scenarios etc.</p>
<p>With HydroMT, you can easily read your model and update one or several components of your model using the <strong>update</strong> function of the command line interface (CLI). Here are the steps and some examples on how to <strong>update/add gauging stations</strong> to your model.</p>
<p>All lines in this notebook which starts with ! are executed from the command line. Within the notebook environment the logging messages are shown after completion. You can also copy these lines and paste them in your shell to get more feedback.</p>
<section id="Import-packages">
<h2>Import packages<a class="headerlink" href="#Import-packages" title="Link to this heading">#</a></h2>
<p>In this notebook, we will use some functions of HydroMT to plot the new gauging stations of the updated model. Here are the libraries to import to realize these steps.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[1]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">numpy</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">np</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">geopandas</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">gpd</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">shapely.geometry</span><span class="w"> </span><span class="kn">import</span> <span class="n">box</span>
</pre></div>
</div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[2]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># for plotting</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">matplotlib.pyplot</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">plt</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">cartopy.io.img_tiles</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">cimgt</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">cartopy.crs</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">ccrs</span>

<span class="n">proj</span> <span class="o">=</span> <span class="n">ccrs</span><span class="o">.</span><span class="n">PlateCarree</span><span class="p">()</span>  <span class="c1"># plot projection</span>
</pre></div>
</div>
</div>
</section>
<section id="Locations-of-the-gauging-stations">
<h2>Locations of the gauging stations<a class="headerlink" href="#Locations-of-the-gauging-stations" title="Link to this heading">#</a></h2>
<p>Adding gauging stations to your <strong>Wflow</strong> model can be quite useful. It allows you to directly extract model outputs at specific locations. For example for model validation, calibration, you can then directly compare model results to available observations.</p>
<p>In our previous notebook, we built a wflow model in which the locations of the available <a class="reference external" href="https://waterandchange.org/en/grdc-data-download-provides-river-discharge-data-online/">GRDC</a> stations are including. If you have other observation data available, you can easily add them to your model using HydroMT. One way to do it is to prepare a csv table containing the ID, latitude and longitude of the available stations. An example <strong>test_stations.csv</strong> has been prepared. Let’s have a look at it.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[3]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">fn_station</span> <span class="o">=</span> <span class="s2">&quot;test_stations.csv&quot;</span>
<span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">fn_station</span><span class="p">,</span> <span class="s2">&quot;r&quot;</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="s2">&quot;utf8&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
    <span class="n">txt</span> <span class="o">=</span> <span class="n">f</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="n">txt</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
﻿ID,Name,x,y,uparea
1001,Gauge1,11.9594,45.8925,3642
1002,Gauge2,12.3395,46.1492,2
1003,Gauge3,12.0785,46.1122,837

</pre></div></div>
</div>
<p>Here we can see that we have defined three stations with an ID and the longitude (x) and latitude (y) coordinates, in the same EPSG system as our model (EPSG 4326). We can now add them to our model.</p>
</section>
<section id="HydroMT-CLI-update-interface">
<h2>HydroMT CLI update interface<a class="headerlink" href="#HydroMT-CLI-update-interface" title="Link to this heading">#</a></h2>
<p>Using the <strong>HydroMT build</strong> API, we can update one or several components of an already existing Wflow model. Let’s get an overview of the available options:</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[4]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Print the options available from the update command</span>
<span class="o">!</span><span class="w"> </span>hydromt<span class="w"> </span>update<span class="w"> </span>--help
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
Usage: hydromt update [OPTIONS] MODEL MODEL_ROOT

  Update a specific component of a model.

  Set an output directory to copy the edited model to a new folder, otherwise
  maps are overwritten.

  Example usage: --------------

  Update Wflow model components outlined in an .yml configuration file and
  write the model to a directory: hydromt update wflow /path/to/model_root  -o
  /path/to/model_out  -i /path/to/wflow_config.yml  -d
  /path/to/data_catalog.yml -v

Options:
  -o, --model-out DIRECTORY  Output model folder. Maps in MODEL_ROOT are
                             overwritten if left empty.
  -i, --config PATH          Path to hydroMT configuration file, for the model
                             specific implementation.  [required]
  -d, --data TEXT            Path to local yaml data catalog file OR name of
                             predefined data catalog.
  --dd, --deltares-data      Flag: Shortcut to add the &#34;deltares_data&#34; catalog
  --fo, --force-overwrite    Flag: If provided overwrite existing model files
  --cache                    Flag: If provided cache tiled rasterdatasets
  -q, --quiet                Decrease verbosity.
  -v, --verbose              Increase verbosity.
  --help                     Show this message and exit.
</pre></div></div>
</div>
</section>
<section id="Update-Wflow-gauging-stations">
<h2>Update Wflow gauging stations<a class="headerlink" href="#Update-Wflow-gauging-stations" title="Link to this heading">#</a></h2>
<p>Let’s open the example configuration file (<strong>wflow_update_gauges.yml</strong>) from the model repository [examples folder] and have a look at the setup_gauges step.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[5]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">fn_config</span> <span class="o">=</span> <span class="s2">&quot;wflow_update_gauges.yml&quot;</span>
<span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">fn_config</span><span class="p">,</span> <span class="s2">&quot;r&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
    <span class="n">txt</span> <span class="o">=</span> <span class="n">f</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="n">txt</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
steps:
  - setup_gauges:
      gauges_fn : test_stations.csv
      basename: test-flow

</pre></div></div>
</div>
<p>Here, you see the step for updating the gauges with our test_stations.csv and giving it the name <strong>test-flow</strong>. Let’s update the model with the following CLI command:</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[6]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># NOTE: copy this line (without !) to your shell for more direct feedback</span>
<span class="o">!</span><span class="w"> </span>hydromt<span class="w"> </span>update<span class="w"> </span>wflow_sbm<span class="w"> </span>wflow_piave_subbasin<span class="w"> </span>-o<span class="w"> </span>./wflow_piave_gauges<span class="w"> </span>-i<span class="w"> </span>wflow_update_gauges.yml<span class="w"> </span>-v
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
2025-10-03 08:50:04,477 - hydromt - log - INFO - HydroMT version: 1.3.0-rc1
2025-10-03 08:50:04,477 - hydromt.cli.main - main - INFO - Updating wflow_sbm model at /home/runner/work/hydromt_wflow/hydromt_wflow/docs/_examples/wflow_piave_subbasin (r).
2025-10-03 08:50:04,477 - hydromt.cli.main - main - INFO - Output dir: /home/runner/work/hydromt_wflow/hydromt_wflow/docs/_examples/wflow_piave_gauges
2025-10-03 08:50:04,477 - hydromt.cli.main - main - INFO - User settings:
2025-10-03 08:50:04,507 - hydromt.model.root - root - INFO - setting root to /home/runner/work/hydromt_wflow/hydromt_wflow/docs/_examples/wflow_piave_subbasin
2025-10-03 08:50:04,507 - hydromt.model.model - model - INFO - Initializing wflow_sbm model from hydromt_wflow (v1.0.0.dev0).
2025-10-03 08:50:04,507 - hydromt.data_catalog.data_catalog - data_catalog - INFO - Parsing data catalog from /home/runner/work/hydromt_wflow/hydromt_wflow/hydromt_wflow/data/parameters_data.yml
2025-10-03 08:50:04,536 - hydromt.hydromt_wflow.wflow_base - wflow_base - INFO - Supported Wflow.jl version v1+
2025-10-03 08:50:04,537 - hydromt.hydromt_wflow.components.config - config - INFO - Reading model config file from /home/runner/work/hydromt_wflow/hydromt_wflow/docs/_examples/wflow_piave_subbasin/wflow_sbm.toml.
2025-10-03 08:50:04,537 - hydromt.hydromt_wflow.components.config - config - INFO - Reading model config file from /home/runner/work/hydromt_wflow/hydromt_wflow/docs/_examples/wflow_piave_subbasin/wflow_sbm.toml.
2025-10-03 08:50:05,678 - hydromt.model.components.tables - tables - INFO - Reading model table files.
2025-10-03 08:50:05,678 - hydromt.model.root - root - INFO - setting root to /home/runner/work/hydromt_wflow/hydromt_wflow/docs/_examples/wflow_piave_gauges
2025-10-03 08:50:05,680 - hydromt.model.model - model - INFO - update: setup_gauges
2025-10-03 08:50:05,680 - hydromt.model.model - model - INFO - setup_gauges.index_col=None
2025-10-03 08:50:05,680 - hydromt.model.model - model - INFO - setup_gauges.snap_to_river=True
2025-10-03 08:50:05,680 - hydromt.model.model - model - INFO - setup_gauges.mask=None
2025-10-03 08:50:05,680 - hydromt.model.model - model - INFO - setup_gauges.snap_uparea=False
2025-10-03 08:50:05,680 - hydromt.model.model - model - INFO - setup_gauges.max_dist=10000.0
2025-10-03 08:50:05,680 - hydromt.model.model - model - INFO - setup_gauges.wdw=3
2025-10-03 08:50:05,680 - hydromt.model.model - model - INFO - setup_gauges.rel_error=0.05
2025-10-03 08:50:05,680 - hydromt.model.model - model - INFO - setup_gauges.abs_error=50.0
2025-10-03 08:50:05,680 - hydromt.model.model - model - INFO - setup_gauges.fillna=False
2025-10-03 08:50:05,680 - hydromt.model.model - model - INFO - setup_gauges.derive_subcatch=False
2025-10-03 08:50:05,680 - hydromt.model.model - model - INFO - setup_gauges.basename=test-flow
2025-10-03 08:50:05,681 - hydromt.model.model - model - INFO - setup_gauges.toml_output=csv
2025-10-03 08:50:05,681 - hydromt.model.model - model - INFO - setup_gauges.gauge_toml_header=[&#39;river_q&#39;, &#39;precip&#39;]
2025-10-03 08:50:05,681 - hydromt.model.model - model - INFO - setup_gauges.gauge_toml_param=[&#39;river_water__volume_flow_rate&#39;, &#39;atmosphere_water__precipitation_volume_flux&#39;]
2025-10-03 08:50:05,681 - hydromt.model.model - model - INFO - setup_gauges.gauges_fn=test_stations.csv
2025-10-03 08:50:05,687 - hydromt.data_catalog.sources.data_source - data_source - INFO - Reading test_stations.csv GeoDataFrame data from /home/runner/work/hydromt_wflow/hydromt_wflow/docs/_examples/test_stations.csv
2025-10-03 08:50:05,691 - hydromt.hydromt_wflow.wflow_base - wflow_base - INFO - 3 test-flow gauge locations found within domain
2025-10-03 08:50:07,001 - hydromt.hydromt_wflow.wflow_base - wflow_base - INFO - Adding [&#39;river_water__volume_flow_rate&#39;, &#39;atmosphere_water__precipitation_volume_flux&#39;] to csv section of toml.
2025-10-03 08:50:07,001 - hydromt.hydromt_wflow.wflow_base - wflow_base - INFO - Write model data to /home/runner/work/hydromt_wflow/hydromt_wflow/docs/_examples/wflow_piave_gauges
2025-10-03 08:50:07,003 - hydromt.model.components.grid - grid - INFO - wflow_sbm.staticmaps: Writing grid data to /home/runner/work/hydromt_wflow/hydromt_wflow/docs/_examples/wflow_piave_gauges/staticmaps.nc.
2025-10-03 08:50:07,273 - hydromt.model.components.spatial - spatial - INFO - wflow_sbm.staticmaps: Writing region to /home/runner/work/hydromt_wflow/hydromt_wflow/docs/_examples/wflow_piave_gauges/staticgeoms/region.geojson.
2025-10-03 08:50:07,300 - hydromt.model.components.geoms - geoms - INFO - wflow_sbm.geoms: Writing geoms to /home/runner/work/hydromt_wflow/hydromt_wflow/docs/_examples/wflow_piave_gauges/staticgeoms/region.geojson.
2025-10-03 08:50:07,301 - hydromt.model.components.geoms - geoms - INFO - wflow_sbm.geoms: Writing geoms to /home/runner/work/hydromt_wflow/hydromt_wflow/docs/_examples/wflow_piave_gauges/staticgeoms/basins.geojson.
2025-10-03 08:50:07,303 - hydromt.model.components.geoms - geoms - INFO - wflow_sbm.geoms: Writing geoms to /home/runner/work/hydromt_wflow/hydromt_wflow/docs/_examples/wflow_piave_gauges/staticgeoms/gauges_grdc.geojson.
2025-10-03 08:50:07,306 - hydromt.model.components.geoms - geoms - INFO - wflow_sbm.geoms: Writing geoms to /home/runner/work/hydromt_wflow/hydromt_wflow/docs/_examples/wflow_piave_gauges/staticgeoms/basins_highres.geojson.
2025-10-03 08:50:07,323 - hydromt.model.components.geoms - geoms - INFO - wflow_sbm.geoms: Writing geoms to /home/runner/work/hydromt_wflow/hydromt_wflow/docs/_examples/wflow_piave_gauges/staticgeoms/outlets.geojson.
2025-10-03 08:50:07,324 - hydromt.model.components.geoms - geoms - INFO - wflow_sbm.geoms: Writing geoms to /home/runner/work/hydromt_wflow/hydromt_wflow/docs/_examples/wflow_piave_gauges/staticgeoms/glaciers.geojson.
2025-10-03 08:50:07,359 - hydromt.model.components.geoms - geoms - INFO - wflow_sbm.geoms: Writing geoms to /home/runner/work/hydromt_wflow/hydromt_wflow/docs/_examples/wflow_piave_gauges/staticgeoms/rivers.geojson.
2025-10-03 08:50:07,362 - hydromt.model.components.geoms - geoms - INFO - wflow_sbm.geoms: Writing geoms to /home/runner/work/hydromt_wflow/hydromt_wflow/docs/_examples/wflow_piave_gauges/staticgeoms/meta_reservoirs_no_control.geojson.
2025-10-03 08:50:07,364 - hydromt.model.components.geoms - geoms - INFO - wflow_sbm.geoms: Writing geoms to /home/runner/work/hydromt_wflow/hydromt_wflow/docs/_examples/wflow_piave_gauges/staticgeoms/reservoirs.geojson.
2025-10-03 08:50:07,366 - hydromt.model.components.geoms - geoms - INFO - wflow_sbm.geoms: Writing geoms to /home/runner/work/hydromt_wflow/hydromt_wflow/docs/_examples/wflow_piave_gauges/staticgeoms/meta_reservoirs_simple_control.geojson.
2025-10-03 08:50:07,370 - hydromt.model.components.geoms - geoms - INFO - wflow_sbm.geoms: Writing geoms to /home/runner/work/hydromt_wflow/hydromt_wflow/docs/_examples/wflow_piave_gauges/staticgeoms/gauges_test-flow.geojson.
2025-10-03 08:50:07,372 - hydromt.hydromt_wflow.components.forcing - forcing - INFO - Write forcing file
2025-10-03 08:50:07,378 - hydromt.hydromt_wflow.components.forcing - forcing - INFO - Writing file /home/runner/work/hydromt_wflow/hydromt_wflow/docs/_examples/wflow_piave_gauges/inmaps.nc
2025-10-03 08:50:07,418 - hydromt.model.components.tables - tables - INFO - wflow_sbm.tables: No tables found, skip writing.
2025-10-03 08:50:07,418 - hydromt.model.components.grid - grid - INFO - wflow_sbm.states: Writing grid data to /home/runner/work/hydromt_wflow/hydromt_wflow/docs/_examples/wflow_piave_gauges/instate/instates.nc.
2025-10-03 08:50:07,522 - hydromt.hydromt_wflow.components.config - config - INFO - Writing model config to /home/runner/work/hydromt_wflow/hydromt_wflow/docs/_examples/wflow_piave_gauges/wflow_sbm.toml.
</pre></div></div>
</div>
<p>The example above means the following: run <strong>hydromt</strong> with:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">update</span> <span class="pre">wflow</span></code>: i.e. update a wflow model</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">wflow_piave_subbasin</span></code>: original model folder</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">-o</span> <span class="pre">./wflow_piave_gauges</span></code>: output updated model folder</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">-i</span> <span class="pre">wflow_update_gauges.yml</span></code>: path to the update configuration file.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">v</span></code>: give some extra verbosity (2 * v) to display feedback on screen. Now debug messages are provided.</p></li>
</ul>
<p>Other available options are available in the <a class="reference external" href="https://deltares.github.io/hydromt_wflow/latest/_generated/hydromt_wflow.WflowBaseModel.setup_gauges.html">docs (setup gauges)</a>.</p>
</section>
<section id="Update-Wflow-gauging-stations-without-snapping">
<h2>Update Wflow gauging stations without snapping<a class="headerlink" href="#Update-Wflow-gauging-stations-without-snapping" title="Link to this heading">#</a></h2>
<p>By default, the <strong>setup_gauges</strong> of HydroMT Wflow will assume that gauges are for flow sampling and will therefore snap the gauges locations to the river. If your observations are used to compare rainfall data, then you do not want HydroMT to move the location of your gauges. This is done by setting <code class="docutils literal notranslate"><span class="pre">snap_to_river:</span> <span class="pre">False</span></code>.</p>
<p>By default, HydroMT Wflow will update the TOML in order to save both river discharge and precipitation at the new gauges locations. With our rainfall stations, we only need to save the precipitation. We can set this with hydroMT using the options:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">gauge_toml_header:</span> <span class="pre">['P-station']</span></code>: set the column name in the outputcsv file of the Wflow run in the TOML configuration</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">gauge_toml_param:</span> <span class="pre">['atmosphere_water__precipitation_volume_flux']</span></code>: set the Wflow variable to save in the corresponding outputcsv file column of Wflow run in the TOML configuration</p></li>
</ul>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[7]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">fn_config</span> <span class="o">=</span> <span class="s2">&quot;wflow_update_gauges_without_snapping.yml&quot;</span>
<span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">fn_config</span><span class="p">,</span> <span class="s2">&quot;r&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
    <span class="n">txt</span> <span class="o">=</span> <span class="n">f</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="n">txt</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
steps:
  - setup_gauges:
      gauges_fn : test_stations.csv
      basename: test-rain
      snap_to_river: False
      gauge_toml_header: [&#39;P-station&#39;]
      gauge_toml_param : [&#39;atmosphere_water__precipitation_volume_flux&#39;]

</pre></div></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[8]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># NOTE: copy this line (without !) to your shell for more direct feedback</span>
<span class="o">!</span><span class="w"> </span>hydromt<span class="w"> </span>update<span class="w"> </span>wflow_sbm<span class="w"> </span>wflow_piave_gauges<span class="w"> </span>-i<span class="w"> </span>wflow_update_gauges_without_snapping.yml<span class="w"> </span>-v
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
2025-10-03 08:50:11,074 - hydromt - log - INFO - HydroMT version: 1.3.0-rc1
2025-10-03 08:50:11,074 - hydromt.cli.main - main - INFO - Updating wflow_sbm model at /home/runner/work/hydromt_wflow/hydromt_wflow/docs/_examples/wflow_piave_gauges (r+).
2025-10-03 08:50:11,074 - hydromt.cli.main - main - INFO - Output dir: /home/runner/work/hydromt_wflow/hydromt_wflow/docs/_examples/wflow_piave_gauges
2025-10-03 08:50:11,074 - hydromt.cli.main - main - INFO - User settings:
2025-10-03 08:50:11,105 - hydromt.model.root - root - INFO - setting root to /home/runner/work/hydromt_wflow/hydromt_wflow/docs/_examples/wflow_piave_gauges
2025-10-03 08:50:11,105 - hydromt.model.model - model - INFO - Initializing wflow_sbm model from hydromt_wflow (v1.0.0.dev0).
2025-10-03 08:50:11,105 - hydromt.data_catalog.data_catalog - data_catalog - INFO - Parsing data catalog from /home/runner/work/hydromt_wflow/hydromt_wflow/hydromt_wflow/data/parameters_data.yml
2025-10-03 08:50:11,135 - hydromt.hydromt_wflow.wflow_base - wflow_base - INFO - Supported Wflow.jl version v1+
2025-10-03 08:50:11,135 - hydromt.hydromt_wflow.components.config - config - INFO - Reading model config file from /home/runner/work/hydromt_wflow/hydromt_wflow/docs/_examples/wflow_piave_gauges/wflow_sbm.toml.
2025-10-03 08:50:12,122 - hydromt.model.model - model - INFO - update: setup_gauges
2025-10-03 08:50:12,123 - hydromt.model.model - model - INFO - setup_gauges.index_col=None
2025-10-03 08:50:12,123 - hydromt.model.model - model - INFO - setup_gauges.snap_to_river=False
2025-10-03 08:50:12,123 - hydromt.model.model - model - INFO - setup_gauges.mask=None
2025-10-03 08:50:12,123 - hydromt.model.model - model - INFO - setup_gauges.snap_uparea=False
2025-10-03 08:50:12,123 - hydromt.model.model - model - INFO - setup_gauges.max_dist=10000.0
2025-10-03 08:50:12,123 - hydromt.model.model - model - INFO - setup_gauges.wdw=3
2025-10-03 08:50:12,123 - hydromt.model.model - model - INFO - setup_gauges.rel_error=0.05
2025-10-03 08:50:12,123 - hydromt.model.model - model - INFO - setup_gauges.abs_error=50.0
2025-10-03 08:50:12,123 - hydromt.model.model - model - INFO - setup_gauges.fillna=False
2025-10-03 08:50:12,123 - hydromt.model.model - model - INFO - setup_gauges.derive_subcatch=False
2025-10-03 08:50:12,123 - hydromt.model.model - model - INFO - setup_gauges.basename=test-rain
2025-10-03 08:50:12,123 - hydromt.model.model - model - INFO - setup_gauges.toml_output=csv
2025-10-03 08:50:12,123 - hydromt.model.model - model - INFO - setup_gauges.gauge_toml_header=[&#39;P-station&#39;]
2025-10-03 08:50:12,123 - hydromt.model.model - model - INFO - setup_gauges.gauge_toml_param=[&#39;atmosphere_water__precipitation_volume_flux&#39;]
2025-10-03 08:50:12,123 - hydromt.model.model - model - INFO - setup_gauges.gauges_fn=test_stations.csv
2025-10-03 08:50:12,204 - hydromt.data_catalog.sources.data_source - data_source - INFO - Reading test_stations.csv GeoDataFrame data from /home/runner/work/hydromt_wflow/hydromt_wflow/docs/_examples/test_stations.csv
2025-10-03 08:50:12,208 - hydromt.hydromt_wflow.wflow_base - wflow_base - INFO - 3 test-rain gauge locations found within domain
2025-10-03 08:50:12,825 - hydromt.hydromt_wflow.wflow_base - wflow_base - INFO - Adding [&#39;atmosphere_water__precipitation_volume_flux&#39;] to csv section of toml.
2025-10-03 08:50:12,825 - hydromt.hydromt_wflow.wflow_base - wflow_base - INFO - Write model data to /home/runner/work/hydromt_wflow/hydromt_wflow/docs/_examples/wflow_piave_gauges
2025-10-03 08:50:12,826 - hydromt.data_catalog.data_catalog - data_catalog - INFO - Parsing data catalog from /home/runner/work/hydromt_wflow/hydromt_wflow/docs/_examples/wflow_piave_gauges/hydromt_data.yml
2025-10-03 08:50:12,828 - hydromt.model.components.grid - grid - INFO - wflow_sbm.staticmaps: Writing grid data to /home/runner/work/hydromt_wflow/hydromt_wflow/docs/_examples/wflow_piave_gauges/staticmaps.nc.
2025-10-03 08:50:12,836 - hydromt.cli.main - main - ERROR - Unable to synchronously create file (unable to truncate a file which is already open)
Traceback (most recent call last):
  File &#34;/home/runner/work/hydromt_wflow/hydromt_wflow/.pixi/envs/docs/lib/python3.13/site-packages/xarray/backends/file_manager.py&#34;, line 219, in _acquire_with_cache_info
    file = self._cache[self._key]
           ~~~~~~~~~~~^^^^^^^^^^^
  File &#34;/home/runner/work/hydromt_wflow/hydromt_wflow/.pixi/envs/docs/lib/python3.13/site-packages/xarray/backends/lru_cache.py&#34;, line 56, in __getitem__
    value = self._cache[key]
            ~~~~~~~~~~~^^^^^
KeyError: [&lt;class &#39;h5netcdf.core.File&#39;&gt;, (&#39;/home/runner/work/hydromt_wflow/hydromt_wflow/docs/_examples/wflow_piave_gauges/staticmaps.nc&#39;,), &#39;a&#39;, ((&#39;decode_vlen_strings&#39;, True), (&#39;driver&#39;, None), (&#39;invalid_netcdf&#39;, None)), &#39;55c9c9e8-34c1-4145-af13-5dd6e9030a70&#39;]

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File &#34;/home/runner/work/hydromt_wflow/hydromt_wflow/.pixi/envs/docs/lib/python3.13/site-packages/hydromt/cli/main.py&#34;, line 349, in update
    mod.update(model_out=model_out, steps=steps, forceful_overwrite=fo)
    ~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File &#34;/home/runner/work/hydromt_wflow/hydromt_wflow/.pixi/envs/docs/lib/python3.13/site-packages/hydromt/model/model.py&#34;, line 371, in update
    self.write()
    ~~~~~~~~~~^^
  File &#34;/home/runner/work/hydromt_wflow/hydromt_wflow/hydromt_wflow/wflow_base.py&#34;, line 1745, in write
    self.write_grid(filename=grid_filename)
    ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^
  File &#34;/home/runner/work/hydromt_wflow/hydromt_wflow/hydromt_wflow/wflow_base.py&#34;, line 1873, in write_grid
    self.staticmaps.write(filename=filename, **kwargs)
    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File &#34;/home/runner/work/hydromt_wflow/hydromt_wflow/hydromt_wflow/components/staticmaps.py&#34;, line 129, in write
    super().write(
    ~~~~~~~~~~~~~^
        str(p_input),
        ^^^^^^^^^^^^^
    ...&lt;3 lines&gt;...
        **kwargs,
        ^^^^^^^^^
    )
    ^
  File &#34;/home/runner/work/hydromt_wflow/hydromt_wflow/.pixi/envs/docs/lib/python3.13/site-packages/hydromt/model/components/grid.py&#34;, line 186, in write
    close_handle = write_nc(
        self.data,
    ...&lt;5 lines&gt;...
        **kwargs,
    )
  File &#34;/home/runner/work/hydromt_wflow/hydromt_wflow/.pixi/envs/docs/lib/python3.13/site-packages/hydromt/io/writers.py&#34;, line 143, in write_nc
    ds.to_netcdf(file_path, **kwargs)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^
  File &#34;/home/runner/work/hydromt_wflow/hydromt_wflow/.pixi/envs/docs/lib/python3.13/site-packages/xarray/core/dataset.py&#34;, line 2104, in to_netcdf
    return to_netcdf(  # type: ignore[return-value]  # mypy cannot resolve the overloads:(
        self,
    ...&lt;10 lines&gt;...
        auto_complex=auto_complex,
    )
  File &#34;/home/runner/work/hydromt_wflow/hydromt_wflow/.pixi/envs/docs/lib/python3.13/site-packages/xarray/backends/writers.py&#34;, line 422, in to_netcdf
    store = get_writable_netcdf_store(
        target,
    ...&lt;5 lines&gt;...
        auto_complex=auto_complex,
    )
  File &#34;/home/runner/work/hydromt_wflow/hydromt_wflow/.pixi/envs/docs/lib/python3.13/site-packages/xarray/backends/writers.py&#34;, line 78, in get_writable_netcdf_store
    return store_open(target, mode=mode, format=format, **kwargs)
  File &#34;/home/runner/work/hydromt_wflow/hydromt_wflow/.pixi/envs/docs/lib/python3.13/site-packages/xarray/backends/h5netcdf_.py&#34;, line 226, in open
    return cls(manager, group=group, mode=mode, lock=lock, autoclose=autoclose)
  File &#34;/home/runner/work/hydromt_wflow/hydromt_wflow/.pixi/envs/docs/lib/python3.13/site-packages/xarray/backends/h5netcdf_.py&#34;, line 149, in __init__
    self._filename = find_root_and_group(self.ds)[0].filename
                                         ^^^^^^^
  File &#34;/home/runner/work/hydromt_wflow/hydromt_wflow/.pixi/envs/docs/lib/python3.13/site-packages/xarray/backends/h5netcdf_.py&#34;, line 237, in ds
    return self._acquire()
           ~~~~~~~~~~~~~^^
  File &#34;/home/runner/work/hydromt_wflow/hydromt_wflow/.pixi/envs/docs/lib/python3.13/site-packages/xarray/backends/h5netcdf_.py&#34;, line 229, in _acquire
    with self._manager.acquire_context(needs_lock) as root:
         ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^
  File &#34;/home/runner/work/hydromt_wflow/hydromt_wflow/.pixi/envs/docs/lib/python3.13/contextlib.py&#34;, line 141, in __enter__
    return next(self.gen)
  File &#34;/home/runner/work/hydromt_wflow/hydromt_wflow/.pixi/envs/docs/lib/python3.13/site-packages/xarray/backends/file_manager.py&#34;, line 207, in acquire_context
    file, cached = self._acquire_with_cache_info(needs_lock)
                   ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^
  File &#34;/home/runner/work/hydromt_wflow/hydromt_wflow/.pixi/envs/docs/lib/python3.13/site-packages/xarray/backends/file_manager.py&#34;, line 225, in _acquire_with_cache_info
    file = self._opener(*self._args, **kwargs)
  File &#34;/home/runner/work/hydromt_wflow/hydromt_wflow/.pixi/envs/docs/lib/python3.13/site-packages/h5netcdf/core.py&#34;, line 1552, in __init__
    self.__h5file = self._h5py.File(
                    ~~~~~~~~~~~~~~~^
        path, mode, track_order=track_order, **kwargs
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File &#34;/home/runner/work/hydromt_wflow/hydromt_wflow/.pixi/envs/docs/lib/python3.13/site-packages/h5py/_hl/files.py&#34;, line 564, in __init__
    fid = make_fid(name, mode, userblock_size, fapl, fcpl, swmr=swmr)
  File &#34;/home/runner/work/hydromt_wflow/hydromt_wflow/.pixi/envs/docs/lib/python3.13/site-packages/h5py/_hl/files.py&#34;, line 244, in make_fid
    fid = h5f.create(name, h5f.ACC_TRUNC, fapl=fapl, fcpl=fcpl)
  File &#34;h5py/_objects.pyx&#34;, line 56, in h5py._objects.with_phil.wrapper
  File &#34;h5py/_objects.pyx&#34;, line 57, in h5py._objects.with_phil.wrapper
  File &#34;h5py/h5f.pyx&#34;, line 122, in h5py.h5f.create
OSError: Unable to synchronously create file (unable to truncate a file which is already open)
Traceback (most recent call last):
  File <span class="ansi-magenta-fg">&#34;/home/runner/work/hydromt_wflow/hydromt_wflow/.pixi/envs/docs/lib/python3.13/site-packages/xarray/backends/file_manager.py&#34;</span>, line <span class="ansi-magenta-fg">219</span>, in <span class="ansi-magenta-fg">_acquire_with_cache_info</span>
    file = <span class="ansi-red-fg">self._cache</span><span class="ansi-red-intense-fg ansi-bold">[self._key]</span>
           <span class="ansi-red-fg">~~~~~~~~~~~</span><span class="ansi-red-intense-fg ansi-bold">^^^^^^^^^^^</span>
  File <span class="ansi-magenta-fg">&#34;/home/runner/work/hydromt_wflow/hydromt_wflow/.pixi/envs/docs/lib/python3.13/site-packages/xarray/backends/lru_cache.py&#34;</span>, line <span class="ansi-magenta-fg">56</span>, in <span class="ansi-magenta-fg">__getitem__</span>
    value = <span class="ansi-red-fg">self._cache</span><span class="ansi-red-intense-fg ansi-bold">[key]</span>
            <span class="ansi-red-fg">~~~~~~~~~~~</span><span class="ansi-red-intense-fg ansi-bold">^^^^^</span>
<span class="ansi-magenta-intense-fg ansi-bold">KeyError</span>: <span class="ansi-magenta-fg">[&lt;class &#39;h5netcdf.core.File&#39;&gt;, (&#39;/home/runner/work/hydromt_wflow/hydromt_wflow/docs/_examples/wflow_piave_gauges/staticmaps.nc&#39;,), &#39;a&#39;, ((&#39;decode_vlen_strings&#39;, True), (&#39;driver&#39;, None), (&#39;invalid_netcdf&#39;, None)), &#39;55c9c9e8-34c1-4145-af13-5dd6e9030a70&#39;]</span>

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File <span class="ansi-magenta-fg">&#34;/home/runner/work/hydromt_wflow/hydromt_wflow/.pixi/envs/docs/bin/hydromt&#34;</span>, line <span class="ansi-magenta-fg">10</span>, in <span class="ansi-magenta-fg">&lt;module&gt;</span>
    sys.exit(<span class="ansi-red-fg">main</span><span class="ansi-red-intense-fg ansi-bold">()</span>)
             <span class="ansi-red-fg">~~~~</span><span class="ansi-red-intense-fg ansi-bold">^^</span>
  File <span class="ansi-magenta-fg">&#34;/home/runner/work/hydromt_wflow/hydromt_wflow/.pixi/envs/docs/lib/python3.13/site-packages/click/core.py&#34;</span>, line <span class="ansi-magenta-fg">1462</span>, in <span class="ansi-magenta-fg">__call__</span>
    return <span class="ansi-red-fg">self.main</span><span class="ansi-red-intense-fg ansi-bold">(*args, **kwargs)</span>
           <span class="ansi-red-fg">~~~~~~~~~</span><span class="ansi-red-intense-fg ansi-bold">^^^^^^^^^^^^^^^^^</span>
  File <span class="ansi-magenta-fg">&#34;/home/runner/work/hydromt_wflow/hydromt_wflow/.pixi/envs/docs/lib/python3.13/site-packages/click/core.py&#34;</span>, line <span class="ansi-magenta-fg">1383</span>, in <span class="ansi-magenta-fg">main</span>
    rv = self.invoke(ctx)
  File <span class="ansi-magenta-fg">&#34;/home/runner/work/hydromt_wflow/hydromt_wflow/.pixi/envs/docs/lib/python3.13/site-packages/click/core.py&#34;</span>, line <span class="ansi-magenta-fg">1850</span>, in <span class="ansi-magenta-fg">invoke</span>
    return _process_result(<span class="ansi-red-fg">sub_ctx.command.invoke</span><span class="ansi-red-intense-fg ansi-bold">(sub_ctx)</span>)
                           <span class="ansi-red-fg">~~~~~~~~~~~~~~~~~~~~~~</span><span class="ansi-red-intense-fg ansi-bold">^^^^^^^^^</span>
  File <span class="ansi-magenta-fg">&#34;/home/runner/work/hydromt_wflow/hydromt_wflow/.pixi/envs/docs/lib/python3.13/site-packages/click/core.py&#34;</span>, line <span class="ansi-magenta-fg">1246</span>, in <span class="ansi-magenta-fg">invoke</span>
    return <span class="ansi-red-fg">ctx.invoke</span><span class="ansi-red-intense-fg ansi-bold">(self.callback, **ctx.params)</span>
           <span class="ansi-red-fg">~~~~~~~~~~</span><span class="ansi-red-intense-fg ansi-bold">^^^^^^^^^^^^^^^^^^^^^^^^^^^^^</span>
  File <span class="ansi-magenta-fg">&#34;/home/runner/work/hydromt_wflow/hydromt_wflow/.pixi/envs/docs/lib/python3.13/site-packages/click/core.py&#34;</span>, line <span class="ansi-magenta-fg">814</span>, in <span class="ansi-magenta-fg">invoke</span>
    return callback(*args, **kwargs)
  File <span class="ansi-magenta-fg">&#34;/home/runner/work/hydromt_wflow/hydromt_wflow/.pixi/envs/docs/lib/python3.13/site-packages/click/decorators.py&#34;</span>, line <span class="ansi-magenta-fg">34</span>, in <span class="ansi-magenta-fg">new_func</span>
    return f(get_current_context(), *args, **kwargs)
  File <span class="ansi-magenta-fg">&#34;/home/runner/work/hydromt_wflow/hydromt_wflow/.pixi/envs/docs/lib/python3.13/site-packages/hydromt/cli/main.py&#34;</span>, line <span class="ansi-magenta-fg">349</span>, in <span class="ansi-magenta-fg">update</span>
    <span class="ansi-red-fg">mod.update</span><span class="ansi-red-intense-fg ansi-bold">(model_out=model_out, steps=steps, forceful_overwrite=fo)</span>
    <span class="ansi-red-fg">~~~~~~~~~~</span><span class="ansi-red-intense-fg ansi-bold">^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^</span>
  File <span class="ansi-magenta-fg">&#34;/home/runner/work/hydromt_wflow/hydromt_wflow/.pixi/envs/docs/lib/python3.13/site-packages/hydromt/model/model.py&#34;</span>, line <span class="ansi-magenta-fg">371</span>, in <span class="ansi-magenta-fg">update</span>
    <span class="ansi-red-fg">self.write</span><span class="ansi-red-intense-fg ansi-bold">()</span>
    <span class="ansi-red-fg">~~~~~~~~~~</span><span class="ansi-red-intense-fg ansi-bold">^^</span>
  File <span class="ansi-magenta-fg">&#34;/home/runner/work/hydromt_wflow/hydromt_wflow/hydromt_wflow/wflow_base.py&#34;</span>, line <span class="ansi-magenta-fg">1745</span>, in <span class="ansi-magenta-fg">write</span>
    <span class="ansi-red-fg">self.write_grid</span><span class="ansi-red-intense-fg ansi-bold">(filename=grid_filename)</span>
    <span class="ansi-red-fg">~~~~~~~~~~~~~~~</span><span class="ansi-red-intense-fg ansi-bold">^^^^^^^^^^^^^^^^^^^^^^^^</span>
  File <span class="ansi-magenta-fg">&#34;/home/runner/work/hydromt_wflow/hydromt_wflow/hydromt_wflow/wflow_base.py&#34;</span>, line <span class="ansi-magenta-fg">1873</span>, in <span class="ansi-magenta-fg">write_grid</span>
    <span class="ansi-red-fg">self.staticmaps.write</span><span class="ansi-red-intense-fg ansi-bold">(filename=filename, **kwargs)</span>
    <span class="ansi-red-fg">~~~~~~~~~~~~~~~~~~~~~</span><span class="ansi-red-intense-fg ansi-bold">^^^^^^^^^^^^^^^^^^^^^^^^^^^^^</span>
  File <span class="ansi-magenta-fg">&#34;/home/runner/work/hydromt_wflow/hydromt_wflow/hydromt_wflow/components/staticmaps.py&#34;</span>, line <span class="ansi-magenta-fg">129</span>, in <span class="ansi-magenta-fg">write</span>
    <span class="ansi-red-fg">super().write</span><span class="ansi-red-intense-fg ansi-bold">(</span>
    <span class="ansi-red-fg">~~~~~~~~~~~~~</span><span class="ansi-red-intense-fg ansi-bold">^</span>
        <span class="ansi-red-intense-fg ansi-bold">str(p_input),</span>
        <span class="ansi-red-intense-fg ansi-bold">^^^^^^^^^^^^^</span>
    ...&lt;3 lines&gt;...
        <span class="ansi-red-intense-fg ansi-bold">**kwargs,</span>
        <span class="ansi-red-intense-fg ansi-bold">^^^^^^^^^</span>
    <span class="ansi-red-intense-fg ansi-bold">)</span>
    <span class="ansi-red-intense-fg ansi-bold">^</span>
  File <span class="ansi-magenta-fg">&#34;/home/runner/work/hydromt_wflow/hydromt_wflow/.pixi/envs/docs/lib/python3.13/site-packages/hydromt/model/components/grid.py&#34;</span>, line <span class="ansi-magenta-fg">186</span>, in <span class="ansi-magenta-fg">write</span>
    close_handle = write_nc(
        self.data,
    ...&lt;5 lines&gt;...
        **kwargs,
    )
  File <span class="ansi-magenta-fg">&#34;/home/runner/work/hydromt_wflow/hydromt_wflow/.pixi/envs/docs/lib/python3.13/site-packages/hydromt/io/writers.py&#34;</span>, line <span class="ansi-magenta-fg">143</span>, in <span class="ansi-magenta-fg">write_nc</span>
    <span class="ansi-red-fg">ds.to_netcdf</span><span class="ansi-red-intense-fg ansi-bold">(file_path, **kwargs)</span>
    <span class="ansi-red-fg">~~~~~~~~~~~~</span><span class="ansi-red-intense-fg ansi-bold">^^^^^^^^^^^^^^^^^^^^^</span>
  File <span class="ansi-magenta-fg">&#34;/home/runner/work/hydromt_wflow/hydromt_wflow/.pixi/envs/docs/lib/python3.13/site-packages/xarray/core/dataset.py&#34;</span>, line <span class="ansi-magenta-fg">2104</span>, in <span class="ansi-magenta-fg">to_netcdf</span>
    return to_netcdf(  # type: ignore[return-value]  # mypy cannot resolve the overloads:(
        self,
    ...&lt;10 lines&gt;...
        auto_complex=auto_complex,
    )
  File <span class="ansi-magenta-fg">&#34;/home/runner/work/hydromt_wflow/hydromt_wflow/.pixi/envs/docs/lib/python3.13/site-packages/xarray/backends/writers.py&#34;</span>, line <span class="ansi-magenta-fg">422</span>, in <span class="ansi-magenta-fg">to_netcdf</span>
    store = get_writable_netcdf_store(
        target,
    ...&lt;5 lines&gt;...
        auto_complex=auto_complex,
    )
  File <span class="ansi-magenta-fg">&#34;/home/runner/work/hydromt_wflow/hydromt_wflow/.pixi/envs/docs/lib/python3.13/site-packages/xarray/backends/writers.py&#34;</span>, line <span class="ansi-magenta-fg">78</span>, in <span class="ansi-magenta-fg">get_writable_netcdf_store</span>
    return store_open(target, mode=mode, format=format, **kwargs)
  File <span class="ansi-magenta-fg">&#34;/home/runner/work/hydromt_wflow/hydromt_wflow/.pixi/envs/docs/lib/python3.13/site-packages/xarray/backends/h5netcdf_.py&#34;</span>, line <span class="ansi-magenta-fg">226</span>, in <span class="ansi-magenta-fg">open</span>
    return cls(manager, group=group, mode=mode, lock=lock, autoclose=autoclose)
  File <span class="ansi-magenta-fg">&#34;/home/runner/work/hydromt_wflow/hydromt_wflow/.pixi/envs/docs/lib/python3.13/site-packages/xarray/backends/h5netcdf_.py&#34;</span>, line <span class="ansi-magenta-fg">149</span>, in <span class="ansi-magenta-fg">__init__</span>
    self._filename = find_root_and_group(<span class="ansi-red-intense-fg ansi-bold">self.ds</span>)[0].filename
                                         <span class="ansi-red-intense-fg ansi-bold">^^^^^^^</span>
  File <span class="ansi-magenta-fg">&#34;/home/runner/work/hydromt_wflow/hydromt_wflow/.pixi/envs/docs/lib/python3.13/site-packages/xarray/backends/h5netcdf_.py&#34;</span>, line <span class="ansi-magenta-fg">237</span>, in <span class="ansi-magenta-fg">ds</span>
    return <span class="ansi-red-fg">self._acquire</span><span class="ansi-red-intense-fg ansi-bold">()</span>
           <span class="ansi-red-fg">~~~~~~~~~~~~~</span><span class="ansi-red-intense-fg ansi-bold">^^</span>
  File <span class="ansi-magenta-fg">&#34;/home/runner/work/hydromt_wflow/hydromt_wflow/.pixi/envs/docs/lib/python3.13/site-packages/xarray/backends/h5netcdf_.py&#34;</span>, line <span class="ansi-magenta-fg">229</span>, in <span class="ansi-magenta-fg">_acquire</span>
    with <span class="ansi-red-fg">self._manager.acquire_context</span><span class="ansi-red-intense-fg ansi-bold">(needs_lock)</span> as root:
         <span class="ansi-red-fg">~~~~~~~~~~~~~~~~~~~~~~~~~~~~~</span><span class="ansi-red-intense-fg ansi-bold">^^^^^^^^^^^^</span>
  File <span class="ansi-magenta-fg">&#34;/home/runner/work/hydromt_wflow/hydromt_wflow/.pixi/envs/docs/lib/python3.13/contextlib.py&#34;</span>, line <span class="ansi-magenta-fg">141</span>, in <span class="ansi-magenta-fg">__enter__</span>
    return next(self.gen)
  File <span class="ansi-magenta-fg">&#34;/home/runner/work/hydromt_wflow/hydromt_wflow/.pixi/envs/docs/lib/python3.13/site-packages/xarray/backends/file_manager.py&#34;</span>, line <span class="ansi-magenta-fg">207</span>, in <span class="ansi-magenta-fg">acquire_context</span>
    file, cached = <span class="ansi-red-fg">self._acquire_with_cache_info</span><span class="ansi-red-intense-fg ansi-bold">(needs_lock)</span>
                   <span class="ansi-red-fg">~~~~~~~~~~~~~~~~~~~~~~~~~~~~~</span><span class="ansi-red-intense-fg ansi-bold">^^^^^^^^^^^^</span>
  File <span class="ansi-magenta-fg">&#34;/home/runner/work/hydromt_wflow/hydromt_wflow/.pixi/envs/docs/lib/python3.13/site-packages/xarray/backends/file_manager.py&#34;</span>, line <span class="ansi-magenta-fg">225</span>, in <span class="ansi-magenta-fg">_acquire_with_cache_info</span>
    file = self._opener(*self._args, **kwargs)
  File <span class="ansi-magenta-fg">&#34;/home/runner/work/hydromt_wflow/hydromt_wflow/.pixi/envs/docs/lib/python3.13/site-packages/h5netcdf/core.py&#34;</span>, line <span class="ansi-magenta-fg">1552</span>, in <span class="ansi-magenta-fg">__init__</span>
    self.__h5file = <span class="ansi-red-fg">self._h5py.File</span><span class="ansi-red-intense-fg ansi-bold">(</span>
                    <span class="ansi-red-fg">~~~~~~~~~~~~~~~</span><span class="ansi-red-intense-fg ansi-bold">^</span>
        <span class="ansi-red-intense-fg ansi-bold">path, mode, track_order=track_order, **kwargs</span>
        <span class="ansi-red-intense-fg ansi-bold">^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^</span>
    <span class="ansi-red-intense-fg ansi-bold">)</span>
    <span class="ansi-red-intense-fg ansi-bold">^</span>
  File <span class="ansi-magenta-fg">&#34;/home/runner/work/hydromt_wflow/hydromt_wflow/.pixi/envs/docs/lib/python3.13/site-packages/h5py/_hl/files.py&#34;</span>, line <span class="ansi-magenta-fg">564</span>, in <span class="ansi-magenta-fg">__init__</span>
    fid = make_fid(name, mode, userblock_size, fapl, fcpl, swmr=swmr)
  File <span class="ansi-magenta-fg">&#34;/home/runner/work/hydromt_wflow/hydromt_wflow/.pixi/envs/docs/lib/python3.13/site-packages/h5py/_hl/files.py&#34;</span>, line <span class="ansi-magenta-fg">244</span>, in <span class="ansi-magenta-fg">make_fid</span>
    fid = h5f.create(name, h5f.ACC_TRUNC, fapl=fapl, fcpl=fcpl)
  File <span class="ansi-magenta-fg">&#34;h5py/_objects.pyx&#34;</span>, line <span class="ansi-magenta-fg">56</span>, in <span class="ansi-magenta-fg">h5py._objects.with_phil.wrapper</span>
  File <span class="ansi-magenta-fg">&#34;h5py/_objects.pyx&#34;</span>, line <span class="ansi-magenta-fg">57</span>, in <span class="ansi-magenta-fg">h5py._objects.with_phil.wrapper</span>
  File <span class="ansi-magenta-fg">&#34;h5py/h5f.pyx&#34;</span>, line <span class="ansi-magenta-fg">122</span>, in <span class="ansi-magenta-fg">h5py.h5f.create</span>
<span class="ansi-magenta-intense-fg ansi-bold">OSError</span>: <span class="ansi-magenta-fg">Unable to synchronously create file (unable to truncate a file which is already open)</span>
</pre></div></div>
</div>
<p>The example above means the following: run <strong>hydromt</strong> with:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">update</span> <span class="pre">wflow</span></code>: i.e. update a wflow model</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">wflow_piave_gauges</span></code>: model folder to update (here we save our updates in the same model folder)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">-i</span> <span class="pre">wflow_update_gauges_without_snapping.yml</span></code>: the config yaml containing the additional options.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">v</span></code>: give some extra verbosity (2 * v) to display feedback on screen. Now debug messages are provided.</p></li>
</ul>
<p>Other available options are available in the <a class="reference external" href="https://deltares.github.io/hydromt_wflow/latest/_generated/hydromt_wflow.WflowBaseModel.setup_gauges.html">docs (setup gauges)</a>.</p>
</section>
<section id="Visualization-of-the-gauges">
<h2>Visualization of the gauges<a class="headerlink" href="#Visualization-of-the-gauges" title="Link to this heading">#</a></h2>
<p>We can now plot our newly created gauges stations maps and check the differences between the flow and rain maps.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[9]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Load the updated model with hydromt</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">hydromt_wflow</span><span class="w"> </span><span class="kn">import</span> <span class="n">WflowSbmModel</span>

<span class="n">mod</span> <span class="o">=</span> <span class="n">WflowSbmModel</span><span class="p">(</span><span class="n">root</span><span class="o">=</span><span class="s2">&quot;wflow_piave_gauges&quot;</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="s2">&quot;r&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[10]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># read/derive river geometries</span>
<span class="n">gdf_riv</span> <span class="o">=</span> <span class="n">mod</span><span class="o">.</span><span class="n">rivers</span>
<span class="c1"># read/derive model basin boundary</span>
<span class="n">gdf_bas</span> <span class="o">=</span> <span class="n">mod</span><span class="o">.</span><span class="n">basins</span>
</pre></div>
</div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[11]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Plot</span>
<span class="c1"># we assume the model maps are in the geographic CRS EPSG:4326</span>
<span class="n">proj</span> <span class="o">=</span> <span class="n">ccrs</span><span class="o">.</span><span class="n">PlateCarree</span><span class="p">()</span>
<span class="c1"># adjust zoomlevel and figure size to your basis size &amp; aspect</span>
<span class="n">zoom_level</span> <span class="o">=</span> <span class="mi">10</span>
<span class="n">figsize</span> <span class="o">=</span> <span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">8</span><span class="p">)</span>
<span class="n">shaded</span> <span class="o">=</span> <span class="kc">False</span>

<span class="c1"># initialize image with geoaxes</span>
<span class="n">fig</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="n">figsize</span><span class="p">)</span>
<span class="n">ax</span> <span class="o">=</span> <span class="n">fig</span><span class="o">.</span><span class="n">add_subplot</span><span class="p">(</span><span class="n">projection</span><span class="o">=</span><span class="n">proj</span><span class="p">)</span>
<span class="n">bounds</span> <span class="o">=</span> <span class="n">mod</span><span class="o">.</span><span class="n">region</span><span class="o">.</span><span class="n">total_bounds</span>
<span class="n">bbox</span> <span class="o">=</span> <span class="n">gpd</span><span class="o">.</span><span class="n">GeoDataFrame</span><span class="p">(</span><span class="n">geometry</span><span class="o">=</span><span class="p">[</span><span class="n">box</span><span class="p">(</span><span class="o">*</span><span class="n">bounds</span><span class="p">)],</span> <span class="n">crs</span><span class="o">=</span><span class="n">mod</span><span class="o">.</span><span class="n">crs</span><span class="p">)</span><span class="o">.</span><span class="n">to_crs</span><span class="p">(</span><span class="mi">3857</span><span class="p">)</span><span class="o">.</span><span class="n">buffer</span><span class="p">(</span><span class="mf">5e3</span><span class="p">)</span>
<span class="n">extent</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">bbox</span><span class="o">.</span><span class="n">to_crs</span><span class="p">(</span><span class="n">mod</span><span class="o">.</span><span class="n">crs</span><span class="p">)</span><span class="o">.</span><span class="n">total_bounds</span><span class="p">)[[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">]]</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_extent</span><span class="p">(</span><span class="n">extent</span><span class="p">,</span> <span class="n">crs</span><span class="o">=</span><span class="n">proj</span><span class="p">)</span>

<span class="c1"># add sat background image</span>
<span class="n">ax</span><span class="o">.</span><span class="n">add_image</span><span class="p">(</span><span class="n">cimgt</span><span class="o">.</span><span class="n">QuadtreeTiles</span><span class="p">(),</span> <span class="n">zoom_level</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.5</span><span class="p">)</span>

<span class="c1"># plot rivers with increasing width with stream order</span>
<span class="n">gdf_riv</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">,</span> <span class="n">lw</span><span class="o">=</span><span class="n">gdf_riv</span><span class="p">[</span><span class="s2">&quot;strord&quot;</span><span class="p">]</span> <span class="o">/</span> <span class="mi">2</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s2">&quot;blue&quot;</span><span class="p">,</span> <span class="n">zorder</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s2">&quot;river&quot;</span><span class="p">)</span>
<span class="c1"># plot the basin boundary</span>
<span class="n">gdf_bas</span><span class="o">.</span><span class="n">boundary</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s2">&quot;k&quot;</span><span class="p">,</span> <span class="n">linewidth</span><span class="o">=</span><span class="mf">0.5</span><span class="p">)</span>
<span class="k">if</span> <span class="s2">&quot;gauges&quot;</span> <span class="ow">in</span> <span class="n">mod</span><span class="o">.</span><span class="n">geoms</span><span class="o">.</span><span class="n">data</span><span class="p">:</span>
    <span class="n">mod</span><span class="o">.</span><span class="n">geoms</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;gauges&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span>
        <span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">,</span> <span class="n">marker</span><span class="o">=</span><span class="s2">&quot;d&quot;</span><span class="p">,</span> <span class="n">markersize</span><span class="o">=</span><span class="mi">25</span><span class="p">,</span> <span class="n">facecolor</span><span class="o">=</span><span class="s2">&quot;k&quot;</span><span class="p">,</span> <span class="n">zorder</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s2">&quot;outlet&quot;</span>
    <span class="p">)</span>
<span class="k">if</span> <span class="s2">&quot;gauges_grdc&quot;</span> <span class="ow">in</span> <span class="n">mod</span><span class="o">.</span><span class="n">geoms</span><span class="o">.</span><span class="n">data</span><span class="p">:</span>
    <span class="n">mod</span><span class="o">.</span><span class="n">geoms</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;gauges_grdc&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span>
        <span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">,</span>
        <span class="n">marker</span><span class="o">=</span><span class="s2">&quot;d&quot;</span><span class="p">,</span>
        <span class="n">markersize</span><span class="o">=</span><span class="mi">25</span><span class="p">,</span>
        <span class="n">facecolor</span><span class="o">=</span><span class="s2">&quot;purple&quot;</span><span class="p">,</span>
        <span class="n">zorder</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span>
        <span class="n">label</span><span class="o">=</span><span class="s2">&quot;Gauges GRDC&quot;</span><span class="p">,</span>
    <span class="p">)</span>
<span class="k">if</span> <span class="s2">&quot;gauges_test-flow&quot;</span> <span class="ow">in</span> <span class="n">mod</span><span class="o">.</span><span class="n">geoms</span><span class="o">.</span><span class="n">data</span><span class="p">:</span>
    <span class="n">mod</span><span class="o">.</span><span class="n">geoms</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;gauges_test-flow&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span>
        <span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">,</span> <span class="n">marker</span><span class="o">=</span><span class="s2">&quot;d&quot;</span><span class="p">,</span> <span class="n">markersize</span><span class="o">=</span><span class="mi">25</span><span class="p">,</span> <span class="n">facecolor</span><span class="o">=</span><span class="s2">&quot;red&quot;</span><span class="p">,</span> <span class="n">zorder</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s2">&quot;Gauges Flow&quot;</span>
    <span class="p">)</span>
<span class="k">if</span> <span class="s2">&quot;gauges_test-rain&quot;</span> <span class="ow">in</span> <span class="n">mod</span><span class="o">.</span><span class="n">geoms</span><span class="o">.</span><span class="n">data</span><span class="p">:</span>
    <span class="n">mod</span><span class="o">.</span><span class="n">geoms</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;gauges_test-rain&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span>
        <span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">,</span>
        <span class="n">marker</span><span class="o">=</span><span class="s2">&quot;d&quot;</span><span class="p">,</span>
        <span class="n">markersize</span><span class="o">=</span><span class="mi">25</span><span class="p">,</span>
        <span class="n">facecolor</span><span class="o">=</span><span class="s2">&quot;green&quot;</span><span class="p">,</span>
        <span class="n">zorder</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span>
        <span class="n">label</span><span class="o">=</span><span class="s2">&quot;Gauges Rain&quot;</span><span class="p">,</span>
    <span class="p">)</span>

<span class="n">ax</span><span class="o">.</span><span class="n">xaxis</span><span class="o">.</span><span class="n">set_visible</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">yaxis</span><span class="o">.</span><span class="n">set_visible</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;latitude [degree north]&quot;</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;longitude [degree east]&quot;</span><span class="p">)</span>
<span class="n">_</span> <span class="o">=</span> <span class="n">ax</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;wflow base map&quot;</span><span class="p">)</span>
<span class="n">legend</span> <span class="o">=</span> <span class="n">ax</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span>
    <span class="n">handles</span><span class="o">=</span><span class="p">[</span><span class="o">*</span><span class="n">ax</span><span class="o">.</span><span class="n">get_legend_handles_labels</span><span class="p">()[</span><span class="mi">0</span><span class="p">]],</span>
    <span class="n">title</span><span class="o">=</span><span class="s2">&quot;Legend&quot;</span><span class="p">,</span>
    <span class="n">loc</span><span class="o">=</span><span class="s2">&quot;lower right&quot;</span><span class="p">,</span>
    <span class="n">frameon</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="n">framealpha</span><span class="o">=</span><span class="mf">0.7</span><span class="p">,</span>
    <span class="n">edgecolor</span><span class="o">=</span><span class="s2">&quot;k&quot;</span><span class="p">,</span>
    <span class="n">facecolor</span><span class="o">=</span><span class="s2">&quot;white&quot;</span><span class="p">,</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../_images/_examples_update_model_gauges_28_0.png" src="../_images/_examples_update_model_gauges_28_0.png" />
</div>
</div>
</section>
</section>


                </article>
              
              
              
              
              
                <footer class="prev-next-footer d-print-none">
                  
<div class="prev-next-area">
    <a class="left-prev"
       href="update_model_forcing.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title">Update a Wflow model: forcing</p>
      </div>
    </a>
    <a class="right-next"
       href="update_model_water_demand.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">Update a wflow model: water demand</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div>
                </footer>
              
            </div>
            
            
              
                <dialog id="pst-secondary-sidebar-modal"></dialog>
                <div id="pst-secondary-sidebar" class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
<div
    id="pst-page-navigation-heading-2"
    class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> On this page
  </div>
  <nav class="bd-toc-nav page-toc" aria-labelledby="pst-page-navigation-heading-2">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#Import-packages">Import packages</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#Locations-of-the-gauging-stations">Locations of the gauging stations</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#HydroMT-CLI-update-interface">HydroMT CLI update interface</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#Update-Wflow-gauging-stations">Update Wflow gauging stations</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#Update-Wflow-gauging-stations-without-snapping">Update Wflow gauging stations without snapping</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#Visualization-of-the-gauges">Visualization of the gauges</a></li>
</ul>
  </nav></div>

  <div class="sidebar-secondary-item">

  
  <div class="tocsection editthispage">
    <a href="https://github.com/Deltares/hydromt_wflow/edit/main/docs/_examples/update_model_gauges.ipynb">
      <i class="fa-solid fa-pencil"></i>
      
      
        
          Edit on GitHub
        
      
    </a>
  </div>
</div>

  <div class="sidebar-secondary-item">
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../_sources/_examples/update_model_gauges.ipynb.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
          </footer>
        
      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script defer src="../_static/scripts/bootstrap.js?digest=8878045cc6db502f8baf"></script>
<script defer src="../_static/scripts/pydata-sphinx-theme.js?digest=8878045cc6db502f8baf"></script>

  <footer class="bd-footer">
<div class="bd-footer__inner bd-page-width">
  
    <div class="footer-items__start">
      
        <div class="footer-item">

  <p class="copyright">
    
      © Copyright Deltares.
      <br/>
    
  </p>
</div>
      
        <div class="footer-item">

  <p class="sphinx-version">
    Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 8.1.3.
    <br/>
  </p>
</div>
      
    </div>
  
  
  
    <div class="footer-items__end">
      
        <div class="footer-item">
<p class="theme-version">
  <!-- # L10n: Setting the PST URL as an argument as this does not need to be localized -->
  Built with the <a href="https://pydata-sphinx-theme.readthedocs.io/en/stable/index.html">PyData Sphinx Theme</a> 0.16.1.
</p></div>
      
    </div>
  
</div>

  </footer>
  </body>
</html>