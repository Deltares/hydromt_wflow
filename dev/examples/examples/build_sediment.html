

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>Build a Wflow sediment model &mdash; hydromt_wflow  documentation</title>
  

  
  <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/theme_overrides.css" type="text/css" />

  
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
        <script src="../../_static/jquery.js"></script>
        <script src="../../_static/underscore.js"></script>
        <script src="../../_static/doctools.js"></script>
        <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    
    <script type="text/javascript" src="../../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Update a wflow model: landuse" href="update_model_landuse.html" />
    <link rel="prev" title="Build a Wflow model from scratch" href="build_model.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../index.html" class="icon icon-home"> hydromt_wflow
          

          
          </a>

          
            
            
              <div class="version">
                0.1.1.dev
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Getting Started</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../intro.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../installation.html">Installation</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">Examples</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="build_model.html">Build Wflow model</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Build Wflow sediment model</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#hydroMT-CLI-build-interface">hydroMT CLI build interface</a></li>
<li class="toctree-l3"><a class="reference internal" href="#Model-setup-configuration">Model setup configuration</a></li>
<li class="toctree-l3"><a class="reference internal" href="#Setup-wflow-sediment-model-from-scratch">Setup wflow sediment model from scratch</a></li>
<li class="toctree-l3"><a class="reference internal" href="#Visualize-and/or-inspect-model-schematization">Visualize and/or inspect model schematization</a></li>
<li class="toctree-l3"><a class="reference internal" href="#Add-Wflow-sediment-layers-to-an-existing-Wflow-model">Add Wflow sediment layers to an existing Wflow model</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="update_model_landuse.html">Update Wflow model: landuse</a></li>
<li class="toctree-l2"><a class="reference internal" href="update_model_forcing.html">Update Wflow model: forcing</a></li>
<li class="toctree-l2"><a class="reference internal" href="update_model_gauges.html">Update Wflow model: gauges</a></li>
<li class="toctree-l2"><a class="reference internal" href="clip_model.html">Clip Wflow model</a></li>
<li class="toctree-l2"><a class="reference internal" href="convert_staticmaps_to_gtiff.html">Convert wflow staticmaps netcdf to raster files</a></li>
<li class="toctree-l2"><a class="reference internal" href="plot_wflow_staticmaps.html">Plot Wflow static maps</a></li>
<li class="toctree-l2"><a class="reference internal" href="plot_wflow_forcing.html">Plot Wflow forcing data</a></li>
</ul>
</li>
</ul>
<p class="caption"><span class="caption-text">User Guide</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../user_guide/wflow/index.html">Wflow</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../user_guide/sediment/index.html">Wflow Sediment</a></li>
</ul>
<p class="caption"><span class="caption-text">Advanced topics</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../advanced/workflows.html">Workflows</a></li>
</ul>
<p class="caption"><span class="caption-text">References &amp; Help</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../api/api_index.html">API reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../contributing.html">Contributing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../changelog.html">Changelog</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">hydromt_wflow</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../index.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="../index.html">Examples</a> &raquo;</li>
        
      <li>Build a Wflow sediment model</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="../../_sources/examples/examples/build_sediment.ipynb.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  
<style>
/* CSS for nbsphinx extension */

/* remove conflicting styling from Sphinx themes */
div.nbinput.container div.prompt *,
div.nboutput.container div.prompt *,
div.nbinput.container div.input_area pre,
div.nboutput.container div.output_area pre,
div.nbinput.container div.input_area .highlight,
div.nboutput.container div.output_area .highlight {
    border: none;
    padding: 0;
    margin: 0;
    box-shadow: none;
}

div.nbinput.container > div[class*=highlight],
div.nboutput.container > div[class*=highlight] {
    margin: 0;
}

div.nbinput.container div.prompt *,
div.nboutput.container div.prompt * {
    background: none;
}

div.nboutput.container div.output_area .highlight,
div.nboutput.container div.output_area pre {
    background: unset;
}

div.nboutput.container div.output_area div.highlight {
    color: unset;  /* override Pygments text color */
}

/* avoid gaps between output lines */
div.nboutput.container div[class*=highlight] pre {
    line-height: normal;
}

/* input/output containers */
div.nbinput.container,
div.nboutput.container {
    display: -webkit-flex;
    display: flex;
    align-items: flex-start;
    margin: 0;
    width: 100%;
}
@media (max-width: 540px) {
    div.nbinput.container,
    div.nboutput.container {
        flex-direction: column;
    }
}

/* input container */
div.nbinput.container {
    padding-top: 5px;
}

/* last container */
div.nblast.container {
    padding-bottom: 5px;
}

/* input prompt */
div.nbinput.container div.prompt pre {
    color: #307FC1;
}

/* output prompt */
div.nboutput.container div.prompt pre {
    color: #BF5B3D;
}

/* all prompts */
div.nbinput.container div.prompt,
div.nboutput.container div.prompt {
    width: 4.5ex;
    padding-top: 5px;
    position: relative;
    user-select: none;
}

div.nbinput.container div.prompt > div,
div.nboutput.container div.prompt > div {
    position: absolute;
    right: 0;
    margin-right: 0.3ex;
}

@media (max-width: 540px) {
    div.nbinput.container div.prompt,
    div.nboutput.container div.prompt {
        width: unset;
        text-align: left;
        padding: 0.4em;
    }
    div.nboutput.container div.prompt.empty {
        padding: 0;
    }

    div.nbinput.container div.prompt > div,
    div.nboutput.container div.prompt > div {
        position: unset;
    }
}

/* disable scrollbars on prompts */
div.nbinput.container div.prompt pre,
div.nboutput.container div.prompt pre {
    overflow: hidden;
}

/* input/output area */
div.nbinput.container div.input_area,
div.nboutput.container div.output_area {
    -webkit-flex: 1;
    flex: 1;
    overflow: auto;
}
@media (max-width: 540px) {
    div.nbinput.container div.input_area,
    div.nboutput.container div.output_area {
        width: 100%;
    }
}

/* input area */
div.nbinput.container div.input_area {
    border: 1px solid #e0e0e0;
    border-radius: 2px;
    /*background: #f5f5f5;*/
}

/* override MathJax center alignment in output cells */
div.nboutput.container div[class*=MathJax] {
    text-align: left !important;
}

/* override sphinx.ext.imgmath center alignment in output cells */
div.nboutput.container div.math p {
    text-align: left;
}

/* standard error */
div.nboutput.container div.output_area.stderr {
    background: #fdd;
}

/* ANSI colors */
.ansi-black-fg { color: #3E424D; }
.ansi-black-bg { background-color: #3E424D; }
.ansi-black-intense-fg { color: #282C36; }
.ansi-black-intense-bg { background-color: #282C36; }
.ansi-red-fg { color: #E75C58; }
.ansi-red-bg { background-color: #E75C58; }
.ansi-red-intense-fg { color: #B22B31; }
.ansi-red-intense-bg { background-color: #B22B31; }
.ansi-green-fg { color: #00A250; }
.ansi-green-bg { background-color: #00A250; }
.ansi-green-intense-fg { color: #007427; }
.ansi-green-intense-bg { background-color: #007427; }
.ansi-yellow-fg { color: #DDB62B; }
.ansi-yellow-bg { background-color: #DDB62B; }
.ansi-yellow-intense-fg { color: #B27D12; }
.ansi-yellow-intense-bg { background-color: #B27D12; }
.ansi-blue-fg { color: #208FFB; }
.ansi-blue-bg { background-color: #208FFB; }
.ansi-blue-intense-fg { color: #0065CA; }
.ansi-blue-intense-bg { background-color: #0065CA; }
.ansi-magenta-fg { color: #D160C4; }
.ansi-magenta-bg { background-color: #D160C4; }
.ansi-magenta-intense-fg { color: #A03196; }
.ansi-magenta-intense-bg { background-color: #A03196; }
.ansi-cyan-fg { color: #60C6C8; }
.ansi-cyan-bg { background-color: #60C6C8; }
.ansi-cyan-intense-fg { color: #258F8F; }
.ansi-cyan-intense-bg { background-color: #258F8F; }
.ansi-white-fg { color: #C5C1B4; }
.ansi-white-bg { background-color: #C5C1B4; }
.ansi-white-intense-fg { color: #A1A6B2; }
.ansi-white-intense-bg { background-color: #A1A6B2; }

.ansi-default-inverse-fg { color: #FFFFFF; }
.ansi-default-inverse-bg { background-color: #000000; }

.ansi-bold { font-weight: bold; }
.ansi-underline { text-decoration: underline; }


div.nbinput.container div.input_area div[class*=highlight] > pre,
div.nboutput.container div.output_area div[class*=highlight] > pre,
div.nboutput.container div.output_area div[class*=highlight].math,
div.nboutput.container div.output_area.rendered_html,
div.nboutput.container div.output_area > div.output_javascript,
div.nboutput.container div.output_area:not(.rendered_html) > img{
    padding: 5px;
    margin: 0;
}

/* fix copybtn overflow problem in chromium (needed for 'sphinx_copybutton') */
div.nbinput.container div.input_area > div[class^='highlight'],
div.nboutput.container div.output_area > div[class^='highlight']{
    overflow-y: hidden;
}

/* hide copybtn icon on prompts (needed for 'sphinx_copybutton') */
.prompt a.copybtn {
    display: none;
}

/* Some additional styling taken form the Jupyter notebook CSS */
div.rendered_html table {
  border: none;
  border-collapse: collapse;
  border-spacing: 0;
  color: black;
  font-size: 12px;
  table-layout: fixed;
}
div.rendered_html thead {
  border-bottom: 1px solid black;
  vertical-align: bottom;
}
div.rendered_html tr,
div.rendered_html th,
div.rendered_html td {
  text-align: right;
  vertical-align: middle;
  padding: 0.5em 0.5em;
  line-height: normal;
  white-space: normal;
  max-width: none;
  border: none;
}
div.rendered_html th {
  font-weight: bold;
}
div.rendered_html tbody tr:nth-child(odd) {
  background: #f5f5f5;
}
div.rendered_html tbody tr:hover {
  background: rgba(66, 165, 245, 0.2);
}

/* CSS overrides for sphinx_rtd_theme */

/* 24px margin */
.nbinput.nblast.container,
.nboutput.nblast.container {
    margin-bottom: 19px;  /* padding has already 5px */
}

/* ... except between code cells! */
.nblast.container + .nbinput.container {
    margin-top: -19px;
}

.admonition > p:before {
    margin-right: 4px;  /* make room for the exclamation icon */
}

/* Fix math alignment, see https://github.com/rtfd/sphinx_rtd_theme/pull/686 */
.math {
    text-align: unset;
}
</style>
<div class="section" id="Build-a-Wflow-sediment-model">
<h1>Build a Wflow sediment model<a class="headerlink" href="#Build-a-Wflow-sediment-model" title="Permalink to this headline">¶</a></h1>
<p>This notebook demonstrates how to prepare a <strong>Wflow sediment</strong> model using the command line interace (CLI).</p>
<p>All lines in this notebook which start with <code class="docutils literal notranslate"><span class="pre">!</span></code> are executed from the command line. Within the notebook environment the logging messages are shown after completion. You can also copy these lines and paste these in your shell to get more direct feedback.</p>
<div class="section" id="hydroMT-CLI-build-interface">
<h2>hydroMT CLI build interface<a class="headerlink" href="#hydroMT-CLI-build-interface" title="Permalink to this headline">¶</a></h2>
<p>Lets first check if the Wflow sediment model is recognized by hydromt</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[1]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="c1"># this should return &quot;wflow, wflow_sediment&quot;</span>
<span class="o">!</span>hydromt --models
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
hydroMT model plugins: wflow (v0.1.1.dev0), wflow_sediment (v0.1.1.dev0)

</pre></div></div>
</div>
<p>Using the <strong>hydromt build</strong> API we can setup a complete model from scratch. Let’s get an overview of all the available options:</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[2]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="o">!</span>hydromt build --help
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
Usage: hydromt build [OPTIONS] MODEL MODEL_ROOT REGION

  Build models from source data.

  Example usage:
  --------------

  To build a wflow model for a subbasin using and point coordinates snapped to cells with stream order &gt;= 4
  hydromt build wflow /path/to/model_root &#34;{&#39;subbasin&#39;: [-7.24, 62.09], &#39;strord&#39;: 4}&#34; -i /path/to/wflow_config.ini

  To build a wflow model based on basin ID
  hydromt build wflow /path/to/model_root &#34;{&#39;basin&#39;: 230001006}&#34;

  To build a sfincs model based on a bbox (for Texel)
  hydromt build sfincs /path/to/model_root &#34;{&#39;bbox&#39;: [4.6891,52.9750,4.9576,53.1994]}&#34;

Options:
  -r, --res FLOAT             Model resolution in model src.
  --build-base / --build-all  Deprecated!
  --opt TEXT                  Component specific keyword arguments, see the
                              setup_&lt;component&gt; method of the specific model
                              for more information about the arguments.

  -i, --config PATH           Path to hydroMT configuration file, for the
                              model specific implementation.

  -d, --data PATH             File path to yml data sources file. See
                              documentation for required yml file format.

  --dd, --deltares-data       Parse default deltares data yml from
                              https://github.com/DirkEilander/hydromt-
                              artifacts/releases

  -q, --quiet                 Decrease verbosity.
  -v, --verbose               Increase verbosity.
  --help                      Show this message and exit.

</pre></div></div>
</div>
</div>
<div class="section" id="Model-setup-configuration">
<h2>Model setup configuration<a class="headerlink" href="#Model-setup-configuration" title="Permalink to this headline">¶</a></h2>
<p>The ini-file contains the model setup configuration and determines which components are build and in which order and optionally sets non-default arguments for each component. This configuration is passed to hydromt using <code class="docutils literal notranslate"><span class="pre">-i</span> <span class="pre">&lt;path_to_ini_file&gt;</span></code>. We have prepared several example ini-files which are available in the model repository <a class="reference external" href="https://github.com/Deltares/hydromt_wflow/tree/main/examples">examples folder</a> and from the
<a class="reference external" href="https://deltares.github.io/hydromt_wflow/latest/user_guide/wflow/build_configuration.html">docs(build_configuration)</a>.</p>
<p>Each header as shown between <code class="docutils literal notranslate"><span class="pre">[...]</span></code> (e.g. <code class="docutils literal notranslate"><span class="pre">[setup_basemaps]</span></code>) corresponds to a model component. All model components are explained in the <a class="reference external" href="https://deltares.github.io/hydromt_wflow/latest/user_guide/wflow/components.html">docs(model_components)</a>.</p>
<p>We will load the default wflow sediment build ini file for inspection:</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[3]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">fn_ini</span> <span class="o">=</span> <span class="s1">&#39;wflow_sediment_build.ini&#39;</span>
<span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">fn_ini</span><span class="p">,</span> <span class="s1">&#39;r&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
    <span class="n">txt</span> <span class="o">=</span> <span class="n">f</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="n">txt</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
[global]
data_libs        = []               # add optional paths to data yml files

[setup_config]                      # options parsed to wflow ini file &lt;section&gt;.&lt;option&gt;
starttime = 2010-01-01T00:00:00
endtime = 2010-03-31T00:00:00
timestepsecs = 86400

[setup_basemaps]
hydrography_fn   = merit_hydro      # source hydrography data {merit_hydro, merit_hydro_1k}
basin_index_fn   = merit_hydro_index # source of basin index corresponding to hydrography_fn
upscale_method   = ihu              # upscaling method for flow direction data, by default &#39;ihu&#39;

[setup_rivers]
hydrography_fn   = merit_hydro   # source hydrography data {merit_hydro, merit_hydro_1k}
river_upa        = 30               # minimum upstream area threshold for the river map [km2]
slope_len        = 2000             # length over which tp calculate river slope [m]

[setup_reservoirs]
reservoirs_fn    = hydro_reservoirs # source for reservoirs based on GRAND: {hydro_reservoirs}; None to skip
min_area         = 1.0              # minimum lake area to consider [km2]
priority_jrc     = True             # if True then JRC data from hydroengine is used to calculate some reservoir attributes instead of the GRanD and HydroLAKES db.

[setup_lakes]
lakes_fn         = hydro_lakes      # source for lakes based on hydroLAKES: {hydro_lakes}; None to skip
min_area         = 1.0              # minimum reservoir area to consider [km2]

[setup_riverwidth]
precip_fn        = chelsa           # source for precip climatology used to estimate discharge: {chelsa}
climate_fn       = koppen_geiger    # source for climate classification used to estimate discharge: {koppen_geiger}
predictor        = discharge        # predictor used in power-law w=a*predictor^b {&#39;discharge&#39;; &#39;uparea&#39;, other staticmaps}; a and b can also be set here.
fill             = False            # if False all river width values are set based on predictor, if True only data gaps and lakes/reservoirs in observed width are filled (works only with MERIT hydro)
min_wth          = 1                # global minimum width

[setup_riverbedsed]
bedsed_mapping_fn = None             # path to a mapping csv file from streamorder to river bed particles characteristics

[setup_lulcmaps]
lulc_fn          = globcover        # source for lulc maps: {globcover, vito, corine}

[setup_laimaps]
lai_fn           = modis_lai        # source for LAI: {modis_lai}

[setup_canopymaps]
canopy_fn        = simard           # source for vegetation canopy height: {simard}

[setup_soilmaps]
soil_fn          = soilgrids        # source for soilmaps: {soilgrids}
usleK_method     = renard           # method to compute the USLE K factor: {renard, epic}

[setup_gauges]
gauges_fn        = grdc             # If not None add gaugemap. Either a path or known gauges_fn: {grdc}
snap_to_river    = True             # If True snaps gauges from source to river
derive_subcatch  = False            # if True derive subcatch map based on gauges.

[setup_constant_pars]               # constant parameters values
c_Bagnold = 0.0000175
eros_expo = 1.5
eros_ov = 0.9
eros_spl_EUROSEM = 2.0
exp_Bagnold = 1.4
ResTrapEff = 1.0

</pre></div></div>
</div>
</div>
<div class="section" id="Setup-wflow-sediment-model-from-scratch">
<h2>Setup wflow sediment model from scratch<a class="headerlink" href="#Setup-wflow-sediment-model-from-scratch" title="Permalink to this headline">¶</a></h2>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[4]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="c1"># NOTE: copy this line (without !) to your shell for more direct feedback</span>
<span class="o">!</span>hydromt build wflow_sediment <span class="s2">&quot;./wflow_test_sediment&quot;</span> <span class="s2">&quot;{&#39;subbasin&#39;: [12.2051, 45.8331], &#39;strord&#39;: 4, &#39;bounds&#39;: [11.70, 45.35, 12.95, 46.70]}&quot;</span> -r <span class="m">0</span>.00833 -i wflow_sediment_build.ini -vv
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
2021-04-29 09:08:03,392 - build - log - DEBUG - Writing log messages to new file /home/runner/work/hydromt_wflow/hydromt_wflow/docs/examples/examples/wflow_test_sediment/hydromt.log.
2021-04-29 09:08:03,392 - build - log - INFO - HydroMT version: 0.4.1.dev
2021-04-29 09:08:03,392 - build - main - INFO - Building instance of wflow_sediment model at /home/runner/work/hydromt_wflow/hydromt_wflow/docs/examples/examples/wflow_test_sediment.
2021-04-29 09:08:03,392 - build - main - INFO - User settings:
2021-04-29 09:08:03,395 - build - cli_utils - INFO - global.data_libs: []
2021-04-29 09:08:03,395 - build - cli_utils - INFO - setup_config.starttime: 2010-01-01T00:00:00
2021-04-29 09:08:03,396 - build - cli_utils - INFO - setup_config.endtime: 2010-03-31T00:00:00
2021-04-29 09:08:03,396 - build - cli_utils - INFO - setup_config.timestepsecs: 86400
2021-04-29 09:08:03,396 - build - cli_utils - INFO - setup_basemaps.hydrography_fn: merit_hydro
2021-04-29 09:08:03,396 - build - cli_utils - INFO - setup_basemaps.basin_index_fn: merit_hydro_index
2021-04-29 09:08:03,396 - build - cli_utils - INFO - setup_basemaps.upscale_method: ihu
2021-04-29 09:08:03,396 - build - cli_utils - INFO - setup_rivers.hydrography_fn: merit_hydro
2021-04-29 09:08:03,396 - build - cli_utils - INFO - setup_rivers.river_upa: 30
2021-04-29 09:08:03,396 - build - cli_utils - INFO - setup_rivers.slope_len: 2000
2021-04-29 09:08:03,396 - build - cli_utils - INFO - setup_reservoirs.reservoirs_fn: hydro_reservoirs
2021-04-29 09:08:03,396 - build - cli_utils - INFO - setup_reservoirs.min_area: 1.0
2021-04-29 09:08:03,396 - build - cli_utils - INFO - setup_reservoirs.priority_jrc: True
2021-04-29 09:08:03,396 - build - cli_utils - INFO - setup_lakes.lakes_fn: hydro_lakes
2021-04-29 09:08:03,396 - build - cli_utils - INFO - setup_lakes.min_area: 1.0
2021-04-29 09:08:03,396 - build - cli_utils - INFO - setup_riverwidth.precip_fn: chelsa
2021-04-29 09:08:03,396 - build - cli_utils - INFO - setup_riverwidth.climate_fn: koppen_geiger
2021-04-29 09:08:03,396 - build - cli_utils - INFO - setup_riverwidth.predictor: discharge
2021-04-29 09:08:03,396 - build - cli_utils - INFO - setup_riverwidth.fill: False
2021-04-29 09:08:03,396 - build - cli_utils - INFO - setup_riverwidth.min_wth: 1
2021-04-29 09:08:03,397 - build - cli_utils - INFO - setup_riverbedsed.bedsed_mapping_fn: None
2021-04-29 09:08:03,397 - build - cli_utils - INFO - setup_lulcmaps.lulc_fn: globcover
2021-04-29 09:08:03,397 - build - cli_utils - INFO - setup_laimaps.lai_fn: modis_lai
2021-04-29 09:08:03,397 - build - cli_utils - INFO - setup_canopymaps.canopy_fn: simard
2021-04-29 09:08:03,397 - build - cli_utils - INFO - setup_soilmaps.soil_fn: soilgrids
2021-04-29 09:08:03,397 - build - cli_utils - INFO - setup_soilmaps.usleK_method: renard
2021-04-29 09:08:03,397 - build - cli_utils - INFO - setup_gauges.gauges_fn: grdc
2021-04-29 09:08:03,397 - build - cli_utils - INFO - setup_gauges.snap_to_river: True
2021-04-29 09:08:03,397 - build - cli_utils - INFO - setup_gauges.derive_subcatch: False
2021-04-29 09:08:03,397 - build - cli_utils - INFO - setup_constant_pars.c_Bagnold: 1.75e-05
2021-04-29 09:08:03,397 - build - cli_utils - INFO - setup_constant_pars.eros_expo: 1.5
2021-04-29 09:08:03,397 - build - cli_utils - INFO - setup_constant_pars.eros_ov: 0.9
2021-04-29 09:08:03,397 - build - cli_utils - INFO - setup_constant_pars.eros_spl_EUROSEM: 2.0
2021-04-29 09:08:03,397 - build - cli_utils - INFO - setup_constant_pars.exp_Bagnold: 1.4
2021-04-29 09:08:03,397 - build - cli_utils - INFO - setup_constant_pars.ResTrapEff: 1.0
2021-04-29 09:08:03,397 - build - model_api - INFO - Initializing wflow_sediment model from hydromt_wflow (v0.1.1.dev0).
2021-04-29 09:08:03,399 - build - model_api - DEBUG - Setting model config options.
2021-04-29 09:08:03,402 - build - model_api - DEBUG - Default config read from /usr/share/miniconda/envs/hydromt-wflow/lib/python3.9/site-packages/hydromt_wflow/data/wflow_sediment/wflow_sediment.toml
2021-04-29 09:08:03,402 - build - model_api - DEBUG - setup_basemaps.region: {&#39;subbasin&#39;: [12.2051, 45.8331], &#39;strord&#39;: 4, &#39;bounds&#39;: [11.7, 45.35, 12.95, 46.7]}
2021-04-29 09:08:03,402 - build - model_api - DEBUG - setup_basemaps.res: 0.00833
2021-04-29 09:08:03,402 - build - model_api - DEBUG - setup_basemaps.hydrography_fn: merit_hydro
2021-04-29 09:08:03,402 - build - model_api - DEBUG - setup_basemaps.basin_index_fn: merit_hydro_index
2021-04-29 09:08:03,402 - build - model_api - DEBUG - setup_basemaps.upscale_method: ihu
2021-04-29 09:08:03,402 - build - wflow - INFO - Preparing base hydrography basemaps.
2021-04-29 09:08:03,402 - build - data_adapter - INFO - Updating data sources from yml file /home/runner/.hydromt_data/data/v0.0.3/data_catalog.yml
2021-04-29 09:08:03,487 - build - data_adapter - INFO - DataCatalog: Getting merit_hydro RasterDataset raster data from /home/runner/.hydromt_data/data/v0.0.3/merit_hydro/{variable}.tif
2021-04-29 09:08:03,592 - build - basin_mask - DEBUG - Parsed region (kind=subbasin): {&#39;strord&#39;: 4, &#39;bounds&#39;: [11.7, 45.35, 12.95, 46.7], &#39;xy&#39;: [12.2051, 45.8331]}
2021-04-29 09:08:07,629 - build - basin_mask - INFO - basin bbox: [11.7750, 45.8042, 12.7450, 46.6900] / size: 664756
2021-04-29 09:08:07,752 - build - wflow - DEBUG - Adding basins vector to staticgeoms.
2021-04-29 09:08:07,753 - build - basemaps - DEBUG - Mask in dataset assumed to represent subbasins.
2021-04-29 09:08:07,754 - build - basemaps - DEBUG - (Sub)basin at original resolution has 664756 cells.
2021-04-29 09:08:07,916 - build - basemaps - DEBUG - Burn subbasin outlet in upstream area data.
2021-04-29 09:08:07,935 - build - basemaps - INFO - Upscale flow direction data: 10x, ihu method.
2021-04-29 09:08:28,675 - build - basemaps - DEBUG - Derive stream order.
2021-04-29 09:08:28,914 - build - basemaps - DEBUG - Map shape: (106, 116); active cells: 6637.
2021-04-29 09:08:28,914 - build - basemaps - DEBUG - Outlet coordinates (head): (12.20750,45.83583).
2021-04-29 09:08:28,986 - build - wflow - DEBUG - Adding region vector to staticgeoms.
2021-04-29 09:08:28,998 - build - model_api - DEBUG - setup_rivers.hydrography_fn: merit_hydro
2021-04-29 09:08:28,998 - build - model_api - DEBUG - setup_rivers.river_upa: 30
2021-04-29 09:08:28,998 - build - model_api - DEBUG - setup_rivers.slope_len: 2000
2021-04-29 09:08:28,998 - build - model_api - DEBUG - setup_rivers.n_river_mapping: None
2021-04-29 09:08:28,998 - build - model_api - DEBUG - setup_rivers.min_rivlen_ratio: 0.1
2021-04-29 09:08:28,998 - build - wflow - INFO - Preparing river maps.
2021-04-29 09:08:28,998 - build - data_adapter - INFO - DataCatalog: Getting merit_hydro RasterDataset raster data from /home/runner/.hydromt_data/data/v0.0.3/merit_hydro/{variable}.tif
2021-04-29 09:08:29,086 - build - data_adapter - DEBUG - RasterDataset: Clip with geom - [11.778, 45.807, 12.745, 46.690]
2021-04-29 09:08:29,119 - build - river - DEBUG - Set river mask with upstream area threshold: 30 km2.
2021-04-29 09:08:29,130 - build - river - DEBUG - Derive river length.
2021-04-29 09:08:35,450 - build - river - DEBUG - Derive river slope.
2021-04-29 09:08:35,914 - build - landuse - INFO - Deriving N_River using average resampling (nodata=-999.0).
2021-04-29 09:08:35,929 - build - wflow - DEBUG - Adding rivers vector to staticgeoms.
2021-04-29 09:08:36,714 - build - model_api - DEBUG - setup_reservoirs.reservoirs_fn: hydro_reservoirs
2021-04-29 09:08:36,715 - build - model_api - DEBUG - setup_reservoirs.min_area: 1.0
2021-04-29 09:08:36,715 - build - model_api - DEBUG - setup_reservoirs.priority_jrc: True
2021-04-29 09:08:36,715 - build - wflow - INFO - Preparing reservoir maps.
2021-04-29 09:08:36,715 - build - data_adapter - INFO - DataCatalog: Getting hydro_reservoirs GeoDataFrame vector data from /home/runner/.hydromt_data/data/v0.0.3/hydro_reservoirs.gpkg
2021-04-29 09:08:36,775 - build - data_adapter - DEBUG - GeoDataFrame: Convert units for 5 columns.
2021-04-29 09:08:36,781 - build - wflow - WARNING - No reservoirs of sufficient size found within region! Skipping reservoir procedures!
2021-04-29 09:08:36,781 - build - model_api - DEBUG - setup_lakes.lakes_fn: hydro_lakes
2021-04-29 09:08:36,781 - build - model_api - DEBUG - setup_lakes.min_area: 1.0
2021-04-29 09:08:36,781 - build - wflow - INFO - Preparing lake maps.
2021-04-29 09:08:36,781 - build - data_adapter - INFO - DataCatalog: Getting hydro_lakes GeoDataFrame vector data from /home/runner/.hydromt_data/data/v0.0.3/hydro_lakes.gpkg
2021-04-29 09:08:36,831 - build - data_adapter - DEBUG - GeoDataFrame: Convert units for 1 columns.
2021-04-29 09:08:36,834 - build - wflow - INFO - 1 lake(s) of sufficient size found within region.
2021-04-29 09:08:36,851 - build - waterbodies - DEBUG - Setting lake outlet map based maximum upstream area.
2021-04-29 09:08:36,928 - build - model_api - DEBUG - setup_riverwidth.predictor: discharge
2021-04-29 09:08:36,928 - build - model_api - DEBUG - setup_riverwidth.fill: False
2021-04-29 09:08:36,928 - build - model_api - DEBUG - setup_riverwidth.fit: False
2021-04-29 09:08:36,929 - build - model_api - DEBUG - setup_riverwidth.min_wth: 1
2021-04-29 09:08:36,929 - build - model_api - DEBUG - setup_riverwidth.precip_fn: chelsa
2021-04-29 09:08:36,929 - build - model_api - DEBUG - setup_riverwidth.climate_fn: koppen_geiger
2021-04-29 09:08:36,929 - build - data_adapter - INFO - DataCatalog: Getting chelsa RasterDataset raster data from /home/runner/.hydromt_data/data/v0.0.3/chelsa.tif
2021-04-29 09:08:36,948 - build - data_adapter - DEBUG - RasterDataset: Clip with geom - [11.778, 45.807, 12.745, 46.690]
2021-04-29 09:08:36,976 - build - data_adapter - INFO - DataCatalog: Getting koppen_geiger RasterDataset raster data from /home/runner/.hydromt_data/data/v0.0.3/koppen_geiger.tif
2021-04-29 09:08:36,994 - build - data_adapter - DEBUG - RasterDataset: Clip with geom - [11.778, 45.807, 12.745, 46.690]
2021-04-29 09:08:37,029 - build - river - DEBUG - Deriving predictor &#34;discharge&#34; values
2021-04-29 09:08:37,038 - build - river - DEBUG - Basin base climate classification: 3 (Cfb)
2021-04-29 09:08:37,097 - build - river - DEBUG - lakeareas masked out in rivwth data.
2021-04-29 09:08:37,097 - build - river - WARNING - mask variable &#34;resareas&#34; not found in maps.
2021-04-29 09:08:37,097 - build - river - WARNING - mask variable &#34;glacareas&#34; not found in maps.
2021-04-29 09:08:37,097 - build - river - INFO - Using &#34;width = a*discharge^b&#34;; where a=6.33, b=0.55 (nse=-0.450; outliers=4.66%)
2021-04-29 09:08:37,098 - build - river - INFO - rivwth set globally based on width-discharge relationship.
2021-04-29 09:08:37,102 - build - model_api - DEBUG - setup_riverbedsed.bedsed_mapping_fn: None
2021-04-29 09:08:37,103 - build - wflow_sediment - INFO - Preparing riverbedsed parameter maps.
2021-04-29 09:08:37,115 - build - landuse - INFO - Deriving D50_River using average resampling (nodata=-999.0).
2021-04-29 09:08:37,133 - build - landuse - INFO - Deriving ClayF_River using average resampling (nodata=-999.0).
2021-04-29 09:08:37,150 - build - landuse - INFO - Deriving SiltF_River using average resampling (nodata=-999.0).
2021-04-29 09:08:37,170 - build - landuse - INFO - Deriving SandF_River using average resampling (nodata=-999.0).
2021-04-29 09:08:37,192 - build - landuse - INFO - Deriving GravelF_River using average resampling (nodata=-999.0).
2021-04-29 09:08:37,216 - build - model_api - DEBUG - setup_lulcmaps.lulc_fn: globcover
2021-04-29 09:08:37,216 - build - model_api - DEBUG - setup_lulcmaps.lulc_mapping_fn: None
2021-04-29 09:08:37,216 - build - model_api - DEBUG - setup_lulcmaps.lulc_vars: [&#39;landuse&#39;, &#39;Cov_River&#39;, &#39;Kext&#39;, &#39;N&#39;, &#39;PathFrac&#39;, &#39;Sl&#39;, &#39;Swood&#39;, &#39;USLE_C&#39;, &#39;WaterFrac&#39;]
2021-04-29 09:08:37,217 - build - wflow - INFO - Preparing LULC parameter maps.
2021-04-29 09:08:37,217 - build - data_adapter - INFO - DataCatalog: Getting globcover RasterDataset raster data from /home/runner/.hydromt_data/data/v0.0.3/globcover.tif
2021-04-29 09:08:37,235 - build - data_adapter - DEBUG - RasterDataset: Clip with geom - [11.778, 45.807, 12.745, 46.690]
2021-04-29 09:08:37,275 - build - landuse - INFO - Deriving landuse using nearest resampling (nodata=230).
2021-04-29 09:08:37,343 - build - landuse - INFO - Deriving Cov_River using average resampling (nodata=-999.0).
2021-04-29 09:08:37,405 - build - landuse - INFO - Deriving Kext using average resampling (nodata=-999.0).
2021-04-29 09:08:37,466 - build - landuse - INFO - Deriving N using average resampling (nodata=-999.0).
2021-04-29 09:08:37,527 - build - landuse - INFO - Deriving PathFrac using average resampling (nodata=-999.0).
2021-04-29 09:08:37,599 - build - landuse - INFO - Deriving Sl using average resampling (nodata=-999.0).
2021-04-29 09:08:37,657 - build - landuse - INFO - Deriving Swood using average resampling (nodata=-999.0).
2021-04-29 09:08:37,716 - build - landuse - INFO - Deriving USLE_C using average resampling (nodata=-999.0).
2021-04-29 09:08:37,777 - build - landuse - INFO - Deriving WaterFrac using average resampling (nodata=-999).
2021-04-29 09:08:37,852 - build - model_api - DEBUG - setup_laimaps.lai_fn: modis_lai
2021-04-29 09:08:37,852 - build - wflow - INFO - Preparing LAI maps.
2021-04-29 09:08:37,852 - build - data_adapter - INFO - DataCatalog: Getting modis_lai RasterDataset netcdf data from /home/runner/.hydromt_data/data/v0.0.3/modis_lai.nc
2021-04-29 09:08:37,871 - build - data_adapter - DEBUG - RasterDataset: Clip with geom - [11.778, 45.807, 12.745, 46.690]
2021-04-29 09:08:37,903 - build - data_adapter - DEBUG - RasterDataset: Convert units for 1 variables.
2021-04-29 09:08:37,910 - build - landuse - INFO - Deriving LAI using average resampling (nodata=None).
2021-04-29 09:08:37,995 - build - model_api - DEBUG - setup_canopymaps.canopy_fn: simard
2021-04-29 09:08:37,995 - build - wflow_sediment - INFO - Preparing canopy height map.
2021-04-29 09:08:37,995 - build - data_adapter - INFO - DataCatalog: Getting simard RasterDataset raster data from /home/runner/.hydromt_data/data/v0.0.3/simard.tif
2021-04-29 09:08:38,014 - build - data_adapter - DEBUG - RasterDataset: Clip with geom - [11.778, 45.807, 12.745, 46.690]
2021-04-29 09:08:38,094 - build - model_api - DEBUG - setup_soilmaps.soil_fn: soilgrids
2021-04-29 09:08:38,094 - build - model_api - DEBUG - setup_soilmaps.usleK_method: renard
2021-04-29 09:08:38,095 - build - wflow_sediment - INFO - Preparing soil parameter maps.
2021-04-29 09:08:38,095 - build - data_adapter - INFO - DataCatalog: Getting soilgrids RasterDataset raster data from /home/runner/.hydromt_data/data/v0.0.3/soilgrids/{variable}.tif
2021-04-29 09:08:38,538 - build - data_adapter - DEBUG - RasterDataset: Clip with geom - [11.778, 45.807, 12.745, 46.690]
2021-04-29 09:08:38,579 - build - data_adapter - DEBUG - RasterDataset: Convert units for 21 variables.
2021-04-29 09:08:39,796 - build - model_api - DEBUG - setup_gauges.gauges_fn: grdc
2021-04-29 09:08:39,797 - build - model_api - DEBUG - setup_gauges.source_gdf: None
2021-04-29 09:08:39,797 - build - model_api - DEBUG - setup_gauges.snap_to_river: True
2021-04-29 09:08:39,797 - build - model_api - DEBUG - setup_gauges.mask: None
2021-04-29 09:08:39,797 - build - model_api - DEBUG - setup_gauges.derive_subcatch: False
2021-04-29 09:08:39,797 - build - model_api - DEBUG - setup_gauges.derive_outlet: True
2021-04-29 09:08:39,797 - build - model_api - DEBUG - setup_gauges.basename: None
2021-04-29 09:08:39,797 - build - model_api - DEBUG - setup_gauges.update_toml: True
2021-04-29 09:08:39,797 - build - model_api - DEBUG - setup_gauges.gauge_toml_header: None
2021-04-29 09:08:39,797 - build - model_api - DEBUG - setup_gauges.gauge_toml_param: None
2021-04-29 09:08:39,797 - build - wflow - INFO - Gauges locations set based on outlets.
2021-04-29 09:08:39,810 - build - wflow - INFO - Gauges map based on catchment outlets added.
2021-04-29 09:08:39,811 - build - data_adapter - INFO - DataCatalog: Getting grdc GeoDataFrame csv data from /home/runner/.hydromt_data/data/v0.0.3/grdc.csv
2021-04-29 09:08:39,842 - build - wflow - INFO - 3 grdc gauge locations found within domain
2021-04-29 09:08:39,860 - build - wflow - INFO - Gauges map from grdc added.
2021-04-29 09:08:39,881 - build - wflow - INFO - Write model data to /home/runner/work/hydromt_wflow/hydromt_wflow/docs/examples/examples/wflow_test_sediment
2021-04-29 09:08:39,881 - build - model_api - INFO - Writing model config to /home/runner/work/hydromt_wflow/hydromt_wflow/docs/examples/examples/wflow_test_sediment/wflow_sediment.toml
2021-04-29 09:08:39,882 - build - wflow - INFO - Write staticmaps to /home/runner/work/hydromt_wflow/hydromt_wflow/docs/examples/examples/wflow_test_sediment/staticmaps.nc
2021-04-29 09:08:40,353 - build - wflow - INFO - Writing model staticgeom to file.

</pre></div></div>
</div>
<p>The example above means the following: run <strong>hydromt build</strong> with:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">wflow_sediment</span></code> : i.e. build a wflow sediment model</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">./wflow_test_sediment</span></code> : output model folder</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">&quot;{'subbasin':</span> <span class="pre">[12.2051,</span> <span class="pre">45.8331],</span> <span class="pre">'strord':</span> <span class="pre">4,</span> <span class="pre">'bounds':</span> <span class="pre">[11.70,</span> <span class="pre">45.35,</span> <span class="pre">12.95,</span> <span class="pre">46.70]}&quot;</span></code> : derive a subbasin with its outlet at the given x,y coordinates and within the given bounds [xmin, ymin, xmax, ymax] (WGS84) snapped to a river with minimum stream order (strord) of 4. All <em>REGION</em> options are described in the <a class="reference external" href="https://deltares.github.io/hydromt/latest/user_guide/cli.html#region-options">docs</a></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">-r</span> <span class="pre">0.0083333</span></code> : build the model at a 30 arc sec (~1km) resolution</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">-i</span> <span class="pre">wflow_sediment_build.ini</span></code> : setup configuration file using</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">-vv</span></code> : give some extra verbosity (2 * v) to display feedback on screen. Now debug messages are provided.</p></li>
</ul>
<p>Next we check which files have been created. The model root should contain two netcdf (.nc) files, one for the staticmaps and one for the forcing data, a wflow configuration (.toml) file. These files are sufficient to run the wflow sediment model. In addition several geometry (.geojson) files are saved in the <em>staticgeoms</em> folder. Finally, the setup process is logged in the hydromt.log file.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[5]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="kn">import</span> <span class="nn">os</span>
<span class="n">root</span> <span class="o">=</span> <span class="s1">&#39;wflow_test_sediment&#39;</span>
<span class="k">for</span> <span class="n">path</span><span class="p">,</span> <span class="n">_</span><span class="p">,</span> <span class="n">files</span> <span class="ow">in</span> <span class="n">os</span><span class="o">.</span><span class="n">walk</span><span class="p">(</span><span class="n">root</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">name</span> <span class="ow">in</span> <span class="n">files</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">name</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s1">&#39;.xml&#39;</span><span class="p">):</span>
            <span class="k">continue</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39; - </span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
wflow_test_sediment
 - wflow_sediment.toml
 - staticmaps.nc
 - hydromt.log
wflow_test_sediment/staticgeoms
 - region.geojson
 - gauges.geojson
 - rivers.geojson
 - lakes.geojson
 - basins.geojson
 - gauges_grdc.geojson
wflow_test_sediment/staticmaps
wflow_test_sediment/setup
wflow_test_sediment/inmaps
wflow_test_sediment/run_default
wflow_test_sediment/instate
</pre></div></div>
</div>
</div>
<div class="section" id="Visualize-and/or-inspect-model-schematization">
<h2>Visualize and/or inspect model schematization<a class="headerlink" href="#Visualize-and/or-inspect-model-schematization" title="Permalink to this headline">¶</a></h2>
<p>You can (copy and) adapt the following example notebooks in order to visualize your Wflow sediment model:</p>
<ul class="simple">
<li><p>The <strong>wflow plot</strong> example notebook contains scripts to visualize your model</p></li>
<li><p>The <strong>wflow nc to raster files</strong> example notebook contains scripts to write the nc model files to a netcdf which can be used to inspect (and modify) the model layers in e.g. QGIS.</p></li>
</ul>
</div>
<div class="section" id="Add-Wflow-sediment-layers-to-an-existing-Wflow-model">
<h2>Add Wflow sediment layers to an existing Wflow model<a class="headerlink" href="#Add-Wflow-sediment-layers-to-an-existing-Wflow-model" title="Permalink to this headline">¶</a></h2>
<p>If you already have a hydrological <strong>Wflow</strong> model and you want to extend it in order to include <strong>sediment</strong> as well, then you do not need to build the wflow_sediment from scratch. You can instead <strong>update</strong> the wflow model with the additional components needed by wflow_sediment.</p>
<p>These components are available in the template <strong>wflow_extend_sediment.ini</strong>:</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[6]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">fn_ini</span> <span class="o">=</span> <span class="s1">&#39;wflow_extend_sediment.ini&#39;</span>
<span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">fn_ini</span><span class="p">,</span> <span class="s1">&#39;r&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
    <span class="n">txt</span> <span class="o">=</span> <span class="n">f</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="n">txt</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
[global]
data_libs        = []               # add optional paths to data yml files

[setup_config]
# model.dolake = True               # uncomment if there are lakes in the wflow model
# model.doreservoir = True          # uncomment if there are reservoirs in the wflow model

[setup_riverbedsed]
bedsed_mapping_fn   = None             # path to a mapping csv file from streamorder to river bed particles characteristics

[setup_lulcmaps]
lulc_fn          = globcover        # source for lulc maps: {globcover, vito, corine}

[setup_canopymaps]
canopy_fn        = simard           # source for vegetation canopy height: {simard}

[setup_soilmaps]
soil_fn          = soilgrids        # source for soilmaps: {soilgrids}
usleK_method     = renard           # method to compute the USLE K factor: {renard, epic}

[setup_gauges]
gauges_fn        = grdc             # If not None add gaugemap. Either a path or known gauges_fn: {grdc}
snap_to_river    = True             # If True snaps gauges from source to river
derive_subcatch  = False            # if True derive subcatch map based on gauges.

[setup_constant_pars]               # constant parameters values
c_Bagnold = 0.0000175
eros_expo = 1.5
eros_ov = 0.9
eros_spl_EUROSEM = 2.0
exp_Bagnold = 1.4
ResTrapEff = 1.0

</pre></div></div>
</div>
<p>Let’s update the hydrological <strong>Wflow</strong> model available from our example for the Piave subbasin:</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[7]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="c1"># NOTE: copy this line (without !) to your shell for more direct feedback</span>
<span class="o">!</span>hydromt update wflow_sediment <span class="s2">&quot;wflow_piave_subbasin&quot;</span> -o <span class="s2">&quot;./wflow_test_extend_sediment&quot;</span> -i wflow_extend_sediment.ini -vv
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
2021-04-29 09:08:44,002 - update - log - DEBUG - Writing log messages to new file /home/runner/work/hydromt_wflow/hydromt_wflow/docs/examples/examples/wflow_test_extend_sediment/hydromt.log.
2021-04-29 09:08:44,002 - update - log - INFO - HydroMT version: 0.4.1.dev
2021-04-29 09:08:44,002 - update - main - INFO - Updating wflow_sediment model at /home/runner/work/hydromt_wflow/hydromt_wflow/docs/examples/examples/wflow_piave_subbasin (r).
2021-04-29 09:08:44,002 - update - main - INFO - Output dir: /home/runner/work/hydromt_wflow/hydromt_wflow/docs/examples/examples/wflow_test_extend_sediment
2021-04-29 09:08:44,002 - update - main - INFO - User settings:
2021-04-29 09:08:44,004 - update - cli_utils - INFO - global.data_libs: []
2021-04-29 09:08:44,004 - update - cli_utils - INFO - setup_riverbedsed.bedsed_mapping_fn: None
2021-04-29 09:08:44,004 - update - cli_utils - INFO - setup_lulcmaps.lulc_fn: globcover
2021-04-29 09:08:44,004 - update - cli_utils - INFO - setup_canopymaps.canopy_fn: simard
2021-04-29 09:08:44,004 - update - cli_utils - INFO - setup_soilmaps.soil_fn: soilgrids
2021-04-29 09:08:44,004 - update - cli_utils - INFO - setup_soilmaps.usleK_method: renard
2021-04-29 09:08:44,004 - update - cli_utils - INFO - setup_gauges.gauges_fn: grdc
2021-04-29 09:08:44,004 - update - cli_utils - INFO - setup_gauges.snap_to_river: True
2021-04-29 09:08:44,004 - update - cli_utils - INFO - setup_gauges.derive_subcatch: False
2021-04-29 09:08:44,004 - update - cli_utils - INFO - setup_constant_pars.c_Bagnold: 1.75e-05
2021-04-29 09:08:44,004 - update - cli_utils - INFO - setup_constant_pars.eros_expo: 1.5
2021-04-29 09:08:44,004 - update - cli_utils - INFO - setup_constant_pars.eros_ov: 0.9
2021-04-29 09:08:44,005 - update - cli_utils - INFO - setup_constant_pars.eros_spl_EUROSEM: 2.0
2021-04-29 09:08:44,005 - update - cli_utils - INFO - setup_constant_pars.exp_Bagnold: 1.4
2021-04-29 09:08:44,005 - update - cli_utils - INFO - setup_constant_pars.ResTrapEff: 1.0
2021-04-29 09:08:44,005 - update - model_api - INFO - Initializing wflow_sediment model from hydromt_wflow (v0.1.1.dev0).
2021-04-29 09:08:44,005 - update - wflow - INFO - Read staticmaps from /home/runner/work/hydromt_wflow/hydromt_wflow/docs/examples/examples/wflow_piave_subbasin/staticmaps.nc
2021-04-29 09:08:44,072 - update - wflow - INFO - Reading model intbl files.
2021-04-29 09:08:44,073 - update - wflow - INFO - Reading model staticgeom files.
2021-04-29 09:08:44,267 - update - wflow - INFO - Read forcing from /home/runner/work/hydromt_wflow/hydromt_wflow/docs/examples/examples/wflow_piave_subbasin/inmaps.nc
2021-04-29 09:08:44,278 - update - wflow - INFO - Model read
2021-04-29 09:08:44,289 - update - model_api - DEBUG - setup_riverbedsed.bedsed_mapping_fn: None
2021-04-29 09:08:44,289 - update - wflow_sediment - INFO - Preparing riverbedsed parameter maps.
2021-04-29 09:08:44,303 - update - landuse - INFO - Deriving D50_River using average resampling (nodata=-999.0).
2021-04-29 09:08:44,319 - update - landuse - INFO - Deriving ClayF_River using average resampling (nodata=-999.0).
2021-04-29 09:08:44,336 - update - landuse - INFO - Deriving SiltF_River using average resampling (nodata=-999.0).
2021-04-29 09:08:44,352 - update - landuse - INFO - Deriving SandF_River using average resampling (nodata=-999.0).
2021-04-29 09:08:44,367 - update - landuse - INFO - Deriving GravelF_River using average resampling (nodata=-999.0).
2021-04-29 09:08:44,400 - update - model_api - DEBUG - setup_lulcmaps.lulc_fn: globcover
2021-04-29 09:08:44,401 - update - model_api - DEBUG - setup_lulcmaps.lulc_mapping_fn: None
2021-04-29 09:08:44,401 - update - model_api - DEBUG - setup_lulcmaps.lulc_vars: [&#39;landuse&#39;, &#39;Cov_River&#39;, &#39;Kext&#39;, &#39;N&#39;, &#39;PathFrac&#39;, &#39;Sl&#39;, &#39;Swood&#39;, &#39;USLE_C&#39;, &#39;WaterFrac&#39;]
2021-04-29 09:08:44,401 - update - wflow - INFO - Preparing LULC parameter maps.
2021-04-29 09:08:44,412 - update - data_adapter - INFO - Updating data sources from yml file /home/runner/.hydromt_data/data/v0.0.3/data_catalog.yml
2021-04-29 09:08:44,499 - update - data_adapter - INFO - DataCatalog: Getting globcover RasterDataset raster data from /home/runner/.hydromt_data/data/v0.0.3/globcover.tif
2021-04-29 09:08:44,532 - update - data_adapter - DEBUG - RasterDataset: Clip with geom - [11.775, 45.808, 12.742, 46.692]
2021-04-29 09:08:44,571 - update - landuse - INFO - Deriving landuse using nearest resampling (nodata=230).
2021-04-29 09:08:44,628 - update - landuse - INFO - Deriving Cov_River using average resampling (nodata=-999.0).
2021-04-29 09:08:44,689 - update - landuse - INFO - Deriving Kext using average resampling (nodata=-999.0).
2021-04-29 09:08:44,743 - update - landuse - INFO - Deriving N using average resampling (nodata=-999.0).
2021-04-29 09:08:44,797 - update - landuse - INFO - Deriving PathFrac using average resampling (nodata=-999.0).
2021-04-29 09:08:44,855 - update - landuse - INFO - Deriving Sl using average resampling (nodata=-999.0).
2021-04-29 09:08:44,908 - update - landuse - INFO - Deriving Swood using average resampling (nodata=-999.0).
2021-04-29 09:08:44,964 - update - landuse - INFO - Deriving USLE_C using average resampling (nodata=-999.0).
2021-04-29 09:08:45,019 - update - landuse - INFO - Deriving WaterFrac using average resampling (nodata=-999).
2021-04-29 09:08:45,118 - update - model_api - DEBUG - setup_canopymaps.canopy_fn: simard
2021-04-29 09:08:45,118 - update - wflow_sediment - INFO - Preparing canopy height map.
2021-04-29 09:08:45,131 - update - data_adapter - INFO - DataCatalog: Getting simard RasterDataset raster data from /home/runner/.hydromt_data/data/v0.0.3/simard.tif
2021-04-29 09:08:45,148 - update - data_adapter - DEBUG - RasterDataset: Clip with geom - [11.775, 45.808, 12.742, 46.692]
2021-04-29 09:08:45,217 - update - model_api - DEBUG - setup_soilmaps.soil_fn: soilgrids
2021-04-29 09:08:45,217 - update - model_api - DEBUG - setup_soilmaps.usleK_method: renard
2021-04-29 09:08:45,217 - update - wflow_sediment - INFO - Preparing soil parameter maps.
2021-04-29 09:08:45,228 - update - data_adapter - INFO - DataCatalog: Getting soilgrids RasterDataset raster data from /home/runner/.hydromt_data/data/v0.0.3/soilgrids/{variable}.tif
2021-04-29 09:08:45,643 - update - data_adapter - DEBUG - RasterDataset: Clip with geom - [11.775, 45.808, 12.742, 46.692]
2021-04-29 09:08:45,688 - update - data_adapter - DEBUG - RasterDataset: Convert units for 21 variables.
2021-04-29 09:08:46,967 - update - model_api - DEBUG - setup_gauges.gauges_fn: grdc
2021-04-29 09:08:46,967 - update - model_api - DEBUG - setup_gauges.source_gdf: None
2021-04-29 09:08:46,967 - update - model_api - DEBUG - setup_gauges.snap_to_river: True
2021-04-29 09:08:46,967 - update - model_api - DEBUG - setup_gauges.mask: None
2021-04-29 09:08:46,968 - update - model_api - DEBUG - setup_gauges.derive_subcatch: False
2021-04-29 09:08:46,968 - update - model_api - DEBUG - setup_gauges.derive_outlet: True
2021-04-29 09:08:46,968 - update - model_api - DEBUG - setup_gauges.basename: None
2021-04-29 09:08:46,968 - update - model_api - DEBUG - setup_gauges.update_toml: True
2021-04-29 09:08:46,968 - update - model_api - DEBUG - setup_gauges.gauge_toml_header: None
2021-04-29 09:08:46,968 - update - model_api - DEBUG - setup_gauges.gauge_toml_param: None
2021-04-29 09:08:46,968 - update - wflow - INFO - Gauges locations set based on outlets.
2021-04-29 09:08:48,065 - update - wflow - INFO - Gauges map based on catchment outlets added.
2021-04-29 09:08:48,065 - update - data_adapter - INFO - DataCatalog: Getting grdc GeoDataFrame csv data from /home/runner/.hydromt_data/data/v0.0.3/grdc.csv
2021-04-29 09:08:48,096 - update - wflow - INFO - 3 grdc gauge locations found within domain
2021-04-29 09:08:49,066 - update - model_api - DEBUG - Default config read from /usr/share/miniconda/envs/hydromt-wflow/lib/python3.9/site-packages/hydromt_wflow/data/wflow_sediment/wflow_sediment.toml
2021-04-29 09:08:49,066 - update - wflow - INFO - Gauges map from grdc added.
2021-04-29 09:08:49,098 - update - wflow - INFO - Write model data to /home/runner/work/hydromt_wflow/hydromt_wflow/docs/examples/examples/wflow_test_extend_sediment
2021-04-29 09:08:49,098 - update - model_api - INFO - Writing model config to /home/runner/work/hydromt_wflow/hydromt_wflow/docs/examples/examples/wflow_test_extend_sediment/wflow_sediment.toml
2021-04-29 09:08:49,099 - update - wflow - INFO - Write staticmaps to /home/runner/work/hydromt_wflow/hydromt_wflow/docs/examples/examples/wflow_test_extend_sediment/staticmaps.nc
2021-04-29 09:08:49,860 - update - wflow - INFO - Writing model staticgeom to file.
2021-04-29 09:08:50,097 - update - wflow - INFO - Write forcing file

</pre></div></div>
</div>
<p>The example above means the following: run <strong>hydromt update</strong> with:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">wflow_sediment</span></code> : i.e. update a wflow_sediment model (in our case a wflow model but with wflow_sediment components)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">wflow_piave_subbasin</span></code> : hydrological wflow model folder</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">-o</span> <span class="pre">&quot;./wflow_test_extend_sediment&quot;</span></code>: output combined wflow hydrology+sediment models</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">-i</span> <span class="pre">wflow_extend_sediment.ini</span></code> : setup configuration file containing wflow sediment specific components</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">-vv</span></code> : give some extra verbosity (2 * v) to display feedback on screen. Now debug messages are provided.</p></li>
</ul>
</div>
</div>


           </div>
           
          </div>
          <footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
        <a href="update_model_landuse.html" class="btn btn-neutral float-right" title="Update a wflow model: landuse" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
        <a href="build_model.html" class="btn btn-neutral float-left" title="Build a Wflow model from scratch" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright Deltares.

    </p>
  </div>
    
    
    
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>